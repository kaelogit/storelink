{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey)"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uLAAY,EAAC,aAAa"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/AddProductModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { X, Loader2, Image as ImageIcon, Trash2, Plus } from \"lucide-react\";\r\n\r\ninterface AddProductModalProps {\r\n  storeId: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function AddProductModal({ storeId, isOpen, onClose, onSuccess }: AddProductModalProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState<{ id: string; name: string }[]>([]);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    stock: \"1\",\r\n    description: \"\",\r\n    categoryId: \"\",\r\n  });\r\n  \r\n  const [imageFiles, setImageFiles] = useState<File[]>([]);\r\n  const [previews, setPreviews] = useState<string[]>([]);\r\n\r\n  // Fetch Categories when modal opens\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const loadCats = async () => {\r\n        const { data } = await supabase.from(\"categories\").select(\"*\").eq(\"store_id\", storeId);\r\n        setCategories(data || []);\r\n      };\r\n      loadCats();\r\n    }\r\n  }, [isOpen, storeId]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const newFiles = Array.from(e.target.files);\r\n      const combinedFiles = [...imageFiles, ...newFiles].slice(0, 4); // Max 4\r\n      setImageFiles(combinedFiles);\r\n      setPreviews(combinedFiles.map(file => URL.createObjectURL(file)));\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    const newFiles = imageFiles.filter((_, i) => i !== index);\r\n    setImageFiles(newFiles);\r\n    setPreviews(newFiles.map(file => URL.createObjectURL(file)));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const uploadedUrls: string[] = [];\r\n      for (const file of imageFiles) {\r\n        const fileName = `${storeId}/${Date.now()}-${Math.random().toString(36).substring(7)}`;\r\n        const { error } = await supabase.storage.from(\"products\").upload(fileName, file);\r\n        if (error) throw error;\r\n        const { data } = supabase.storage.from(\"products\").getPublicUrl(fileName);\r\n        uploadedUrls.push(data.publicUrl);\r\n      }\r\n\r\n      const { error: dbError } = await supabase.from(\"products\").insert({\r\n        store_id: storeId,\r\n        name: formData.name,\r\n        price: parseFloat(formData.price),\r\n        stock_quantity: parseInt(formData.stock),\r\n        description: formData.description,\r\n        category_id: formData.categoryId || null, // Save Category\r\n        image_urls: uploadedUrls,\r\n        is_active: true\r\n      });\r\n\r\n      if (dbError) throw dbError;\r\n\r\n      onSuccess();\r\n      onClose();\r\n      // Reset\r\n      setFormData({ name: \"\", price: \"\", stock: \"1\", description: \"\", categoryId: \"\" });\r\n      setImageFiles([]);\r\n      setPreviews([]);\r\n\r\n    } catch (error: any) {\r\n      alert(\"Error: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-md rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        \r\n        <div className=\"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">Add Product</h2>\r\n          <button onClick={onClose} className=\"p-2 bg-white rounded-full shadow-sm text-gray-500\"><X size={20} /></button>\r\n        </div>\r\n\r\n        <div className=\"p-6 overflow-y-auto\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            \r\n            {/* Image Grid */}\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Images (Max 4)</label>\r\n              <div className=\"grid grid-cols-4 gap-2\">\r\n                {previews.map((src, index) => (\r\n                  <div key={index} className=\"aspect-square relative rounded-xl overflow-hidden border border-gray-200\">\r\n                    <img src={src} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                    <button type=\"button\" onClick={() => removeImage(index)} className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full\"><Trash2 size={12} /></button>\r\n                  </div>\r\n                ))}\r\n                {previews.length < 4 && (\r\n                  <label className=\"aspect-square rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 bg-gray-50 cursor-pointer hover:border-gray-900 hover:text-gray-900 transition\">\r\n                    <Plus size={24} className=\"mb-1\"/>\r\n                    <input type=\"file\" accept=\"image/*\" multiple onChange={handleFileChange} className=\"hidden\" />\r\n                  </label>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Fields */}\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Product Name</label>\r\n              <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" placeholder=\"e.g. Nike Air Force\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n               <div>\r\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">Price (â‚¦)</label>\r\n                  <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" placeholder=\"50000\" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} />\r\n               </div>\r\n               <div>\r\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">Stock Qty</label>\r\n                  <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" placeholder=\"10\" value={formData.stock} onChange={e => setFormData({...formData, stock: e.target.value})} />\r\n               </div>\r\n            </div>\r\n\r\n            {/* Category Select */}\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Category</label>\r\n              <select \r\n                className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gray-900\"\r\n                value={formData.categoryId}\r\n                onChange={e => setFormData({...formData, categoryId: e.target.value})}\r\n              >\r\n                <option value=\"\">No Category</option>\r\n                {categories.map(cat => (\r\n                  <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                 <label className=\"block text-sm font-bold text-gray-700\">Description</label>\r\n                 <span className={`text-xs ${formData.description.length > 450 ? 'text-red-500' : 'text-gray-400'}`}>{formData.description.length}/500</span>\r\n              </div>\r\n              <textarea maxLength={500} className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl h-24 resize-none\" placeholder=\"Describe the item...\" value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} />\r\n            </div>\r\n\r\n            <button type=\"submit\" disabled={loading} className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg\">\r\n              {loading ? <Loader2 className=\"animate-spin\" /> : \"Save Product\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/EditProfileModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { X, Loader2, MapPin, Phone, Globe, Camera, Image as ImageIcon } from \"lucide-react\";\r\nimport { Store } from \"@/types\";\r\nimport Image from \"next/image\";\r\n\r\ninterface EditProfileModalProps {\r\n  store: Store;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function EditProfileModal({ store, isOpen, onClose, onSuccess }: EditProfileModalProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Form Data\r\n  const [formData, setFormData] = useState({\r\n    name: store.name,\r\n    description: store.description || \"\",\r\n    location: store.location,\r\n    whatsapp: store.whatsapp_number,\r\n    instagram: store.instagram_url || \"\",\r\n    tiktok: store.tiktok_url || \"\",\r\n  });\r\n\r\n  // Image State\r\n  const [logoFile, setLogoFile] = useState<File | null>(null);\r\n  const [logoPreview, setLogoPreview] = useState<string | null>(store.logo_url);\r\n  \r\n  const [coverFile, setCoverFile] = useState<File | null>(null);\r\n  const [coverPreview, setCoverPreview] = useState<string | null>(store.cover_image_url);\r\n\r\n  // Hidden Inputs Refs\r\n  const logoInputRef = useRef<HTMLInputElement>(null);\r\n  const coverInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Handle Image Selection\r\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      const file = e.target.files[0];\r\n      setLogoFile(file);\r\n      setLogoPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleCoverChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      const file = e.target.files[0];\r\n      setCoverFile(file);\r\n      setCoverPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      let finalLogoUrl = store.logo_url;\r\n      let finalCoverUrl = store.cover_image_url;\r\n\r\n      // 1. Upload Logo (If changed)\r\n      if (logoFile) {\r\n        const fileName = `${store.id}/logo-${Date.now()}`;\r\n        const { error } = await supabase.storage.from(\"stores\").upload(fileName, logoFile);\r\n        if (error) throw error;\r\n        const { data } = supabase.storage.from(\"stores\").getPublicUrl(fileName);\r\n        finalLogoUrl = data.publicUrl;\r\n      }\r\n\r\n      // 2. Upload Cover (If changed)\r\n      if (coverFile) {\r\n        const fileName = `${store.id}/cover-${Date.now()}`;\r\n        const { error } = await supabase.storage.from(\"stores\").upload(fileName, coverFile);\r\n        if (error) throw error;\r\n        const { data } = supabase.storage.from(\"stores\").getPublicUrl(fileName);\r\n        finalCoverUrl = data.publicUrl;\r\n      }\r\n\r\n      // 3. Update Database\r\n      const { error } = await supabase\r\n        .from(\"stores\")\r\n        .update({\r\n          name: formData.name,\r\n          description: formData.description,\r\n          location: formData.location,\r\n          whatsapp_number: formData.whatsapp,\r\n          instagram_url: formData.instagram,\r\n          tiktok_url: formData.tiktok,\r\n          logo_url: finalLogoUrl,\r\n          cover_image_url: finalCoverUrl,\r\n        })\r\n        .eq(\"id\", store.id);\r\n\r\n      if (error) throw error;\r\n\r\n      onSuccess();\r\n      onClose();\r\n    } catch (error: any) {\r\n      alert(\"Error: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-lg rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        \r\n        <div className=\"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">Edit Shop Profile</h2>\r\n          <button onClick={onClose} className=\"p-2 bg-white rounded-full shadow-sm text-gray-500 hover:bg-gray-100\"><X size={20} /></button>\r\n        </div>\r\n\r\n        <div className=\"p-0 overflow-y-auto bg-gray-50\">\r\n          <form onSubmit={handleSubmit}>\r\n            \r\n            {/* --- VISUAL EDIT SECTION --- */}\r\n            <div className=\"relative mb-16\">\r\n              \r\n              {/* Cover Photo Area */}\r\n              <div \r\n                className=\"h-32 bg-gray-300 w-full relative group cursor-pointer\"\r\n                onClick={() => coverInputRef.current?.click()}\r\n              >\r\n                {coverPreview ? (\r\n                  <Image src={coverPreview} alt=\"Cover\" fill className=\"object-cover\" />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center bg-gray-800 text-gray-400\">\r\n                    <ImageIcon size={24} />\r\n                  </div>\r\n                )}\r\n                {/* Overlay */}\r\n                <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition\">\r\n                  <span className=\"text-white font-bold text-sm flex items-center gap-2\"><Camera size={16}/> Edit Cover</span>\r\n                </div>\r\n                <input ref={coverInputRef} type=\"file\" hidden accept=\"image/*\" onChange={handleCoverChange} />\r\n              </div>\r\n\r\n              {/* Logo Area */}\r\n              <div \r\n                className=\"absolute -bottom-10 left-6 w-24 h-24 rounded-full border-4 border-white bg-white shadow-md cursor-pointer group overflow-hidden\"\r\n                onClick={() => logoInputRef.current?.click()}\r\n              >\r\n                <div className=\"w-full h-full relative rounded-full overflow-hidden bg-gray-100\">\r\n                  {logoPreview ? (\r\n                    <Image src={logoPreview} alt=\"Logo\" fill className=\"object-cover\" />\r\n                  ) : (\r\n                    <div className=\"flex items-center justify-center h-full font-bold text-2xl text-gray-300\">\r\n                      {formData.name[0]}\r\n                    </div>\r\n                  )}\r\n                  {/* Overlay */}\r\n                  <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition\">\r\n                    <Camera size={20} className=\"text-white\" />\r\n                  </div>\r\n                </div>\r\n                <input ref={logoInputRef} type=\"file\" hidden accept=\"image/*\" onChange={handleLogoChange} />\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* --- FIELDS SECTION --- */}\r\n            <div className=\"p-6 space-y-4\">\r\n              \r\n              <div>\r\n                <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Store Name</label>\r\n                <input required className=\"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-gray-900 outline-none\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Bio</label>\r\n                <textarea className=\"w-full p-3 bg-white border border-gray-200 rounded-xl h-20 resize-none focus:ring-2 focus:ring-gray-900 outline-none\" value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Location</label>\r\n                  <div className=\"relative\">\r\n                    <MapPin className=\"absolute left-3 top-3.5 text-gray-400 w-4 h-4\" />\r\n                    <input required className=\"w-full p-3 pl-9 bg-white border border-gray-200 rounded-xl outline-none\" value={formData.location} onChange={e => setFormData({...formData, location: e.target.value})} />\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">WhatsApp</label>\r\n                  <div className=\"relative\">\r\n                    <Phone className=\"absolute left-3 top-3.5 text-gray-400 w-4 h-4\" />\r\n                    <input required className=\"w-full p-3 pl-9 bg-white border border-gray-200 rounded-xl outline-none\" value={formData.whatsapp} onChange={e => setFormData({...formData, whatsapp: e.target.value})} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Socials</label>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"relative\">\r\n                    <Globe className=\"absolute left-3 top-3.5 text-pink-500 w-4 h-4\" />\r\n                    <input className=\"w-full p-3 pl-9 bg-white border border-gray-200 rounded-xl text-sm outline-none\" placeholder=\"Instagram URL\" value={formData.instagram} onChange={e => setFormData({...formData, instagram: e.target.value})} />\r\n                  </div>\r\n                  <div className=\"relative\">\r\n                    <Globe className=\"absolute left-3 top-3.5 text-black w-4 h-4\" />\r\n                    <input className=\"w-full p-3 pl-9 bg-white border border-gray-200 rounded-xl text-sm outline-none\" placeholder=\"TikTok URL\" value={formData.tiktok} onChange={e => setFormData({...formData, tiktok: e.target.value})} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <button type=\"submit\" disabled={loading} className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg mt-4\">\r\n                {loading ? <Loader2 className=\"animate-spin mx-auto\" /> : \"Save Changes\"}\r\n              </button>\r\n            </div>\r\n\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1080, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/EditProductModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { X, Loader2, Save, Trash2, Plus } from \"lucide-react\";\r\nimport { Product } from \"@/types\";\r\nimport Image from \"next/image\";\r\n\r\ninterface EditProductModalProps {\r\n  product: Product | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n}\r\n\r\nexport default function EditProductModal({ product, isOpen, onClose, onSuccess }: EditProductModalProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState<{ id: string; name: string }[]>([]);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    stock: \"\",\r\n    description: \"\",\r\n    categoryId: \"\",\r\n  });\r\n\r\n  const [existingImages, setExistingImages] = useState<string[]>([]);\r\n  const [newFiles, setNewFiles] = useState<File[]>([]);\r\n  const [newPreviews, setNewPreviews] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      setFormData({\r\n        name: product.name,\r\n        price: product.price.toString(),\r\n        stock: product.stock_quantity.toString(),\r\n        description: product.description || \"\",\r\n        categoryId: (product as any).category_id || \"\", // Load Category\r\n      });\r\n      setExistingImages(product.image_urls || []);\r\n      setNewFiles([]);\r\n      setNewPreviews([]);\r\n      \r\n      // Load Categories\r\n      const loadCats = async () => {\r\n        const { data } = await supabase.from(\"categories\").select(\"*\").eq(\"store_id\", product.store_id);\r\n        setCategories(data || []);\r\n      };\r\n      loadCats();\r\n    }\r\n  }, [product]);\r\n\r\n  if (!isOpen || !product) return null;\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const selected = Array.from(e.target.files);\r\n      if (existingImages.length + newFiles.length + selected.length > 4) {\r\n        alert(\"Max 4 images allowed.\");\r\n        return;\r\n      }\r\n      setNewFiles([...newFiles, ...selected]);\r\n      setNewPreviews([...newPreviews, ...selected.map(file => URL.createObjectURL(file))]);\r\n    }\r\n  };\r\n\r\n  const removeExistingImage = (index: number) => setExistingImages(prev => prev.filter((_, i) => i !== index));\r\n  const removeNewFile = (index: number) => {\r\n    setNewFiles(prev => prev.filter((_, i) => i !== index));\r\n    setNewPreviews(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const finalImageUrls = [...existingImages];\r\n      for (const file of newFiles) {\r\n        const fileName = `${product.store_id}/${Date.now()}-${Math.random().toString(36).substring(7)}`;\r\n        const { error } = await supabase.storage.from(\"products\").upload(fileName, file);\r\n        if (error) throw error;\r\n        const { data } = supabase.storage.from(\"products\").getPublicUrl(fileName);\r\n        finalImageUrls.push(data.publicUrl);\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from(\"products\")\r\n        .update({\r\n          name: formData.name,\r\n          price: parseFloat(formData.price),\r\n          stock_quantity: parseInt(formData.stock),\r\n          description: formData.description,\r\n          category_id: formData.categoryId || null,\r\n          image_urls: finalImageUrls,\r\n        })\r\n        .eq(\"id\", product.id);\r\n\r\n      if (error) throw error;\r\n\r\n      onSuccess();\r\n      onClose();\r\n    } catch (error: any) {\r\n      alert(\"Error: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-lg rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        <div className=\"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">Edit Product</h2>\r\n          <button onClick={onClose} className=\"p-2 bg-white rounded-full shadow-sm text-gray-500\"><X size={20} /></button>\r\n        </div>\r\n        <div className=\"p-6 overflow-y-auto\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n            {/* Images */}\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Images ({existingImages.length + newFiles.length}/4)</label>\r\n              <div className=\"grid grid-cols-4 gap-2\">\r\n                {existingImages.map((url, idx) => (\r\n                  <div key={`old-${idx}`} className=\"aspect-square relative rounded-xl overflow-hidden border border-gray-200 group\">\r\n                    <Image src={url} alt=\"\" fill className=\"object-cover\" />\r\n                    <button type=\"button\" onClick={() => removeExistingImage(idx)} className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100\"><Trash2 size={12}/></button>\r\n                  </div>\r\n                ))}\r\n                {newPreviews.map((url, idx) => (\r\n                  <div key={`new-${idx}`} className=\"aspect-square relative rounded-xl overflow-hidden border-2 border-green-500\">\r\n                    <img src={url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                    <button type=\"button\" onClick={() => removeNewFile(idx)} className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full\"><X size={12}/></button>\r\n                  </div>\r\n                ))}\r\n                {(existingImages.length + newFiles.length) < 4 && (\r\n                   <label className=\"aspect-square rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 bg-gray-50 cursor-pointer hover:border-gray-900 hover:text-gray-900\">\r\n                     <Plus size={24}/>\r\n                     <input type=\"file\" accept=\"image/*\" multiple onChange={handleFileChange} className=\"hidden\" />\r\n                   </label>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {/* Fields */}\r\n            <div className=\"space-y-4\">\r\n              <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} placeholder=\"Name\" />\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                 <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} placeholder=\"Price\" />\r\n                 <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" value={formData.stock} onChange={e => setFormData({...formData, stock: e.target.value})} placeholder=\"Stock\" />\r\n              </div>\r\n              <select className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl\" value={formData.categoryId} onChange={e => setFormData({...formData, categoryId: e.target.value})}>\r\n                <option value=\"\">No Category</option>\r\n                {categories.map(cat => <option key={cat.id} value={cat.id}>{cat.name}</option>)}\r\n              </select>\r\n              <textarea maxLength={500} className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl h-24 resize-none\" value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} />\r\n            </div>\r\n            <button type=\"submit\" disabled={loading} className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg\">\r\n              {loading ? <Loader2 className=\"animate-spin\" /> : <><Save size={18} /> Update</>}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1515, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { BadgeCheck, Plus, Package, Loader2, Settings, Edit2, Trash2, Eye, Box, CreditCard, Activity } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport { Store, Product } from \"@/types\";\r\n\r\n// --- IMPORT ALL MODALS ---\r\nimport AddProductModal from \"@/components/store/AddProductModal\";\r\nimport EditProfileModal from \"@/components/store/EditProfileModal\";\r\nimport EditProductModal from \"@/components/store/EditProductModal\";\r\n\r\nexport default function Dashboard() {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Data State\r\n  const [store, setStore] = useState<Store | null>(null);\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  \r\n  // Modal States\r\n  const [isAddProductOpen, setIsAddProductOpen] = useState(false);\r\n  const [isEditProfileOpen, setIsEditProfileOpen] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null); // Holds the product being edited\r\n\r\n  // --- LOAD DATA ---\r\n  const loadDashboardData = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) { router.push(\"/login\"); return; }\r\n\r\n    // 1. Get Store\r\n    const { data: userStore } = await supabase.from(\"stores\").select(\"*\").eq(\"owner_id\", user.id).single();\r\n    if (!userStore) { router.push(\"/onboarding\"); return; }\r\n    setStore(userStore);\r\n\r\n    // 2. Get Products (Newest First)\r\n    const { data: storeProducts } = await supabase\r\n      .from(\"products\")\r\n      .select(\"*\")\r\n      .eq(\"store_id\", userStore.id)\r\n      .order('created_at', { ascending: false });\r\n      \r\n    setProducts(storeProducts || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => { loadDashboardData(); }, [router]);\r\n\r\n  // --- DELETE PRODUCT ---\r\n  const deleteProduct = async (id: string) => {\r\n    if(!confirm(\"Are you sure you want to delete this product? This cannot be undone.\")) return;\r\n    \r\n    // Optional: You could also delete the images from storage here to save space\r\n    \r\n    await supabase.from(\"products\").delete().eq(\"id\", id);\r\n    loadDashboardData(); // Refresh list\r\n  };\r\n\r\n  if (loading) return <div className=\"min-h-screen flex items-center justify-center bg-gray-50\"><Loader2 className=\"animate-spin text-gray-400\" /></div>;\r\n  if (!store) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 pb-32\">\r\n      \r\n      {/* --- TOP BAR --- */}\r\n      <header className=\"bg-white border-b border-gray-200 sticky top-0 z-20\">\r\n        <div className=\"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between\">\r\n          <div className=\"font-bold text-xl tracking-tight flex items-center gap-2\">\r\n            StoreLink <span className=\"bg-gray-100 text-xs px-2 py-1 rounded-md text-gray-500 font-normal\">Vendor</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n             <button onClick={() => setIsEditProfileOpen(true)} className=\"text-sm font-medium text-gray-600 hover:text-gray-900 flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg transition hover:bg-gray-200\">\r\n                <Settings size={16} /> Edit Profile\r\n             </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-6xl mx-auto px-4 py-8\">\r\n        \r\n        {/* --- WELCOME CARD --- */}\r\n        <div className=\"bg-white rounded-3xl p-6 border border-gray-100 shadow-sm mb-8 relative overflow-hidden\">\r\n          {/* Decorative background blob */}\r\n          <div className=\"absolute top-0 right-0 w-64 h-64 bg-green-50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-50 pointer-events-none\"></div>\r\n          \r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 relative z-10\">\r\n             <div className=\"flex items-center gap-4\">\r\n                {/* Logo Circle */}\r\n                <div className=\"w-16 h-16 rounded-full bg-gray-200 overflow-hidden border-2 border-white shadow-sm relative\">\r\n                  {store.logo_url ? <Image src={store.logo_url} alt=\"Logo\" fill className=\"object-cover\" /> : <div className=\"w-full h-full flex items-center justify-center text-gray-400 font-bold text-xl\">{store.name[0]}</div>}\r\n                </div>\r\n                \r\n                <div>\r\n                  <p className=\"text-gray-500 text-xs font-bold uppercase tracking-wider mb-0.5\">Welcome Back</p>\r\n                  <h1 className=\"text-3xl font-bold text-gray-900 flex items-center gap-2\">\r\n                    {store.name}\r\n                    {store.subscription_plan === 'premium' && <BadgeCheck className=\"text-blue-500 fill-blue-50 w-6 h-6\" />}\r\n                  </h1>\r\n                </div>\r\n             </div>\r\n             \r\n             <div className=\"flex gap-3 w-full md:w-auto mt-2 md:mt-0\">\r\n               <a href={`/${store.slug}`} target=\"_blank\" className=\"flex-1 md:flex-none text-center px-5 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl text-sm font-bold hover:bg-gray-50 transition shadow-sm\">\r\n                 View Live Shop\r\n               </a>\r\n               <button onClick={() => setIsAddProductOpen(true)} className=\"flex-1 md:flex-none px-6 py-3 bg-gray-900 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-gray-800 transition flex items-center justify-center gap-2\">\r\n                 <Plus size={18} /> Add Product\r\n               </button>\r\n             </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* --- STATS GRID --- */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10\">\r\n           {/* Total Products */}\r\n           <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32 hover:border-gray-300 transition group\">\r\n              <div className=\"flex justify-between items-start\">\r\n                 <div className=\"p-2 bg-purple-50 rounded-lg text-purple-600 group-hover:bg-purple-100 transition\"><Box size={20} /></div>\r\n                 <span className=\"text-[10px] md:text-xs text-gray-400 font-bold tracking-wider\">PRODUCTS</span>\r\n              </div>\r\n              <p className=\"text-3xl font-bold text-gray-900\">{products.length}</p>\r\n           </div>\r\n\r\n           {/* Total Views */}\r\n           <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32 hover:border-gray-300 transition group\">\r\n              <div className=\"flex justify-between items-start\">\r\n                 <div className=\"p-2 bg-orange-50 rounded-lg text-orange-600 group-hover:bg-orange-100 transition\"><Eye size={20} /></div>\r\n                 <span className=\"text-[10px] md:text-xs text-gray-400 font-bold tracking-wider\">VIEWS</span>\r\n              </div>\r\n              <p className=\"text-3xl font-bold text-gray-900\">0</p>\r\n           </div>\r\n\r\n           {/* Plan */}\r\n           <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32 hover:border-gray-300 transition group\">\r\n              <div className=\"flex justify-between items-start\">\r\n                 <div className=\"p-2 bg-blue-50 rounded-lg text-blue-600 group-hover:bg-blue-100 transition\"><CreditCard size={20} /></div>\r\n                 <span className=\"text-[10px] md:text-xs text-gray-400 font-bold tracking-wider\">PLAN</span>\r\n              </div>\r\n              <p className=\"text-2xl font-bold text-gray-900 capitalize\">{store.subscription_plan}</p>\r\n           </div>\r\n\r\n           {/* Status */}\r\n           <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between h-32 hover:border-gray-300 transition group\">\r\n              <div className=\"flex justify-between items-start\">\r\n                 <div className=\"p-2 bg-green-50 rounded-lg text-green-600 group-hover:bg-green-100 transition\"><Activity size={20} /></div>\r\n                 <span className=\"text-[10px] md:text-xs text-gray-400 font-bold tracking-wider\">STATUS</span>\r\n              </div>\r\n              <p className=\"text-2xl font-bold text-green-600\">Active</p>\r\n           </div>\r\n        </div>\r\n\r\n        {/* --- INVENTORY HEADER --- */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n           <h2 className=\"text-lg font-bold text-gray-900\">Inventory</h2>\r\n           <span className=\"text-xs text-gray-400 font-medium\">{products.length} Items</span>\r\n        </div>\r\n        \r\n        {/* --- PRODUCT LIST --- */}\r\n        {products.length > 0 ? (\r\n          <div className=\"bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm\">\r\n            {products.map((product, index) => (\r\n              <div key={product.id} className={`flex flex-col sm:flex-row sm:items-center gap-4 p-4 hover:bg-gray-50 transition ${index !== products.length - 1 ? 'border-b border-gray-50' : ''}`}>\r\n                \r\n                {/* 1. Image (First from the list) */}\r\n                <div className=\"h-20 w-20 bg-gray-100 rounded-xl relative overflow-hidden flex-shrink-0 border border-gray-200\">\r\n                   {product.image_urls && product.image_urls.length > 0 ? (\r\n                     <Image src={product.image_urls[0]} alt=\"\" fill className=\"object-cover\" />\r\n                   ) : (\r\n                     <div className=\"w-full h-full flex items-center justify-center text-gray-300\"><Package size={20} /></div>\r\n                   )}\r\n                </div>\r\n                \r\n                {/* 2. Info */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                   <h3 className=\"font-bold text-gray-900 text-sm truncate\">{product.name}</h3>\r\n                   <div className=\"flex items-center gap-2 mt-1\">\r\n                     <p className=\"text-emerald-600 font-bold text-sm\">â‚¦{product.price.toLocaleString()}</p>\r\n                     <span className=\"text-gray-300\">â€¢</span>\r\n                     {product.stock_quantity > 0 ? (\r\n                        <span className=\"text-xs bg-green-50 text-green-700 px-2 py-0.5 rounded-md font-medium\">In Stock ({product.stock_quantity})</span>\r\n                     ) : (\r\n                        <span className=\"text-xs bg-red-50 text-red-600 px-2 py-0.5 rounded-md font-medium\">Out of Stock</span>\r\n                     )}\r\n                   </div>\r\n                </div>\r\n\r\n                {/* 3. Actions */}\r\n                <div className=\"flex gap-2 self-end sm:self-center\">\r\n                   <button \r\n                      onClick={() => setEditingProduct(product)} \r\n                      className=\"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-blue-50 text-gray-600 hover:text-blue-600 rounded-lg text-xs font-bold transition\"\r\n                   >\r\n                     <Edit2 size={16} /> Edit\r\n                   </button>\r\n                   <button \r\n                      onClick={() => deleteProduct(product.id)} \r\n                      className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition\"\r\n                   >\r\n                      <Trash2 size={18} />\r\n                   </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          // Empty State\r\n          <div className=\"bg-white rounded-3xl border border-dashed border-gray-200 p-12 text-center flex flex-col items-center\">\r\n             <div className=\"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4\">\r\n               <Package className=\"text-gray-300 w-8 h-8\" />\r\n             </div>\r\n             <h3 className=\"text-lg font-bold text-gray-900\">Your shelf is empty</h3>\r\n             <p className=\"text-gray-500 text-sm max-w-xs mx-auto mt-2\">\r\n               Upload your first product to start selling today.\r\n             </p>\r\n             <button onClick={() => setIsAddProductOpen(true)} className=\"mt-6 px-6 py-2 bg-gray-900 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-gray-800 transition\">\r\n               Add First Product\r\n             </button>\r\n          </div>\r\n        )}\r\n\r\n      </main>\r\n\r\n      {/* --- MODALS --- */}\r\n      \r\n      {/* 1. Add Product */}\r\n      <AddProductModal \r\n        storeId={store.id} \r\n        isOpen={isAddProductOpen} \r\n        onClose={() => setIsAddProductOpen(false)}\r\n        onSuccess={loadDashboardData}\r\n      />\r\n      \r\n      {/* 2. Edit Profile */}\r\n      <EditProfileModal \r\n        store={store}\r\n        isOpen={isEditProfileOpen}\r\n        onClose={() => setIsEditProfileOpen(false)}\r\n        onSuccess={loadDashboardData}\r\n      />\r\n\r\n      {/* 3. Edit Product (Godmode) */}\r\n      <EditProductModal \r\n        product={editingProduct}\r\n        isOpen={!!editingProduct} \r\n        onClose={() => setEditingProduct(null)}\r\n        onSuccess={loadDashboardData}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}