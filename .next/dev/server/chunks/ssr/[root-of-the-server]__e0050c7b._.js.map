{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/OrderDetailsModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { \r\n  X, Download, CheckCircle, Lock, Coins, \r\n  AlertCircle, Loader2, Phone, MapPin \r\n} from \"lucide-react\"; \r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface OrderDetailsModalProps {\r\n  order: any;\r\n  storeName: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onUpdate: () => void;\r\n}\r\n\r\nexport default function OrderDetailsModal({ order, storeName, isOpen, onClose, onUpdate }: OrderDetailsModalProps) {\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [isProcessing, setIsProcessing] = useState(false); \r\n  const [localStatus, setLocalStatus] = useState<string | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (isOpen && order) {\r\n      setLocalStatus(order.status);\r\n      const fetchItems = async () => {\r\n        const { data, error } = await supabase.from(\"order_items\").select(\"*\").eq(\"order_id\", order.id);\r\n        if (error) console.error(\"Error fetching items:\", error.message);\r\n        setItems(data || []);\r\n      };\r\n      fetchItems();\r\n    }\r\n  }, [isOpen, order]);\r\n\r\n  const handleStockDeduction = async () => {\r\n    try {\r\n      for (const item of items) {\r\n        const { data: product } = await supabase\r\n          .from(\"storefront_products\")\r\n          .select(\"stock_quantity\")\r\n          .eq(\"id\", item.product_id)\r\n          .single();\r\n\r\n        if (product) {\r\n          const currentStock = product.stock_quantity || 0;\r\n          const newStock = Math.max(0, currentStock - item.quantity);\r\n          \r\n          const updatePayload: any = { stock_quantity: newStock };\r\n          \r\n          if (newStock === 0 && currentStock > 0) {\r\n            updatePayload.sold_out_at = new Date().toISOString();\r\n          }\r\n\r\n          await supabase\r\n            .from(\"products\") \r\n            .update(updatePayload)\r\n            .eq(\"id\", item.product_id);\r\n            \r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Stock Deduction Error:\", err);\r\n    }\r\n  };\r\n\r\n  const updateStatus = async (status: string) => {\r\n    const displayStatus = status === 'completed' ? 'Paid' : status;\r\n    const redeemedAmount = order.coins_redeemed || 0;\r\n    \r\n    const confirmMsg = status === 'cancelled' && (redeemedAmount > 0)\r\n      ? `Cancel order? This will automatically REFUND ₦${redeemedAmount.toLocaleString()} coins to the customer.`\r\n      : `Mark order as ${displayStatus}? This will deduct purchased items from your stock.`;\r\n\r\n    if (!confirm(confirmMsg)) return;\r\n    \r\n    setIsProcessing(true);\r\n    try {\r\n      let response;\r\n\r\n      if (status === 'cancelled') {\r\n        response = await supabase.rpc('cancel_and_refund_order', { \r\n          order_id_param: order.id \r\n        });\r\n      } else {\r\n        response = await supabase.from(\"orders\").update({ status }).eq(\"id\", order.id);\r\n        \r\n        if (!response.error && status === 'completed') {\r\n          await handleStockDeduction();\r\n        }\r\n      }\r\n      \r\n      if (response.error) throw response.error;\r\n\r\n      setLocalStatus(status);\r\n      if (onUpdate) onUpdate(); \r\n      setTimeout(() => onClose(), 800);\r\n\r\n    } catch (error: any) {\r\n      console.error(\"Dashboard Update Error:\", error);\r\n      alert(`Update Failed: ${error.message}`);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n  \r\n  const downloadReceipt = () => {\r\n    const doc = new jsPDF();\r\n    doc.setFillColor(17, 24, 39); \r\n    doc.rect(0, 0, 210, 24, 'F'); \r\n    doc.setTextColor(255, 255, 255); \r\n    doc.setFontSize(10); doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"VERIFIED BY STORELINK™ SECURE CHECKOUT\", 105, 15, { align: \"center\" });\r\n\r\n    doc.setTextColor(0, 0, 0); doc.setFontSize(24);\r\n    doc.text(storeName.toUpperCase(), 105, 45, { align: \"center\" }); \r\n    doc.setFontSize(10); doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(\"OFFICIAL RECEIPT\", 105, 52, { align: \"center\" });\r\n    doc.line(14, 60, 196, 60); \r\n\r\n    doc.text(`Order #: ${order.id.slice(0, 8).toUpperCase()}`, 14, 70);\r\n    doc.text(`Date: ${new Date(order.created_at).toLocaleDateString()}`, 14, 76);\r\n    doc.text(`Status: ${localStatus?.toUpperCase()}`, 14, 82);\r\n\r\n    doc.setFont(\"helvetica\", \"bold\"); doc.text(\"Bill To:\", 140, 70);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(order.customer_name, 140, 76);\r\n    doc.text(order.customer_phone, 140, 82);\r\n    doc.text(doc.splitTextToSize(order.customer_address || \"\", 60), 140, 88);\r\n\r\n    const tableData = items.map(item => [\r\n      item.product_name, item.quantity, `N${item.price.toLocaleString()}`, `N${(item.price * item.quantity).toLocaleString()}`\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 105, head: [['Item', 'Qty', 'Price', 'Total']], body: tableData, theme: 'grid',\r\n      headStyles: { fillColor: [17, 24, 39], textColor: [255, 255, 255] }\r\n    });\r\n\r\n    let currentY = (doc as any).lastAutoTable.finalY + 15;\r\n    const redeemedAmount = order.coins_redeemed || 0;\r\n    \r\n    if (redeemedAmount > 0) {\r\n      doc.text(\"SUBTOTAL:\", 140, currentY);\r\n      doc.text(`N${(order.total_amount + redeemedAmount).toLocaleString()}`, 196, currentY, { align: \"right\" });\r\n      currentY += 7;\r\n      doc.setTextColor(180, 83, 9);\r\n      doc.text(\"EMPIRE COINS USED:\", 140, currentY);\r\n      doc.text(`-N${redeemedAmount.toLocaleString()}`, 196, currentY, { align: \"right\" });\r\n      currentY += 10;\r\n    }\r\n\r\n    doc.setFontSize(14); doc.setFont(\"helvetica\", \"bold\"); doc.setTextColor(0, 0, 0); \r\n    doc.text(\"GRAND TOTAL:\", 140, currentY);\r\n    doc.setTextColor(16, 185, 129);\r\n    doc.text(`N${order.total_amount.toLocaleString()}`, 196, currentY, { align: \"right\" });\r\n\r\n    doc.save(`${storeName.replace(/\\s+/g, '_')}_Receipt_${order.id.slice(0,6)}.pdf`);\r\n  };\r\n\r\n  if (!isOpen || !order) return null;\r\n  const subTotal = order.total_amount + (order.coins_redeemed || 0);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[200] flex items-end md:items-center justify-center bg-black/60 backdrop-blur-sm p-0 md:p-4 animate-in fade-in\">\r\n      <div className=\"absolute inset-0\" onClick={onClose}></div>\r\n      <div className=\"bg-white w-full max-w-lg rounded-t-[2.5rem] md:rounded-[2.5rem] h-[90vh] md:h-auto max-h-[90vh] shadow-2xl relative overflow-hidden flex flex-col\">\r\n        \r\n        <div className=\"sticky top-0 z-30 bg-white p-6 border-b border-gray-100 flex justify-between items-center\">\r\n           <span className=\"font-black text-gray-900 uppercase tracking-tighter\">Order Detail</span>\r\n           <button onClick={onClose} className=\"p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition active:scale-90\"><X size={20}/></button>\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-y-auto p-6 md:p-8 no-scrollbar pb-10\">\r\n          <div className=\"text-center mb-8\">\r\n             <div className={`inline-flex items-center justify-center w-14 h-14 rounded-2xl mb-4 ${localStatus === 'cancelled' ? 'bg-red-100 text-red-600' : 'bg-emerald-100 text-emerald-600'}`}>\r\n               {localStatus === 'cancelled' ? <AlertCircle size={28} /> : <CheckCircle size={28} />}\r\n             </div>\r\n             <h2 className=\"font-black text-2xl text-gray-900 uppercase tracking-tighter\">Order Summary</h2>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 p-6 rounded-[2rem] mb-8 border border-gray-100 relative overflow-hidden\">\r\n             <div className=\"grid grid-cols-2 gap-6 relative z-10\">\r\n               <div>\r\n                  <h3 className=\"font-black text-[10px] text-gray-400 uppercase tracking-widest mb-2\">Customer</h3>\r\n                  <p className=\"text-sm font-black text-gray-900 leading-tight\">{order.customer_name}</p>\r\n                  \r\n                  <div className=\"mt-3 space-y-1.5 border-t border-gray-200/50 pt-3\">\r\n                     <div className=\"flex items-center gap-2 text-gray-500\">\r\n                        <Phone size={12} className=\"text-emerald-600\" />\r\n                        <span className=\"text-[11px] font-bold\">{order.customer_phone}</span>\r\n                     </div>\r\n                     <div className=\"flex items-start gap-2 text-gray-500\">\r\n                        <MapPin size={12} className=\"text-emerald-600 mt-0.5 shrink-0\" />\r\n                        <span className=\"text-[11px] font-medium leading-relaxed\">\r\n                           {order.customer_address || \"No address provided\"}\r\n                        </span>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n               \r\n               <div className=\"text-right\">\r\n                  <h3 className=\"font-black text-[10px] text-gray-400 uppercase tracking-widest mb-2\">Status</h3>\r\n                  <span className={`inline-block px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-tighter ${\r\n                      localStatus === 'completed' ? 'bg-emerald-100 text-emerald-700' :\r\n                      localStatus === 'cancelled' ? 'bg-red-100 text-red-700' :\r\n                      'bg-amber-100 text-amber-700'\r\n                  }`}>{localStatus === 'completed' ? 'Paid' : localStatus}</span>\r\n               </div>\r\n             </div>\r\n             {localStatus === 'cancelled' && order.coins_redeemed > 0 && (\r\n                <div className=\"mt-4 p-3 bg-red-50 border border-red-100 rounded-xl flex items-center gap-2 text-[10px] font-bold text-red-600 uppercase tracking-tight animate-in zoom-in\">\r\n                  <Coins size={14} fill=\"currentColor\"/> ₦{order.coins_redeemed.toLocaleString()} Coins Refunded\r\n                </div>\r\n             )}\r\n          </div>\r\n\r\n          <div className=\"space-y-4 mb-8\">\r\n             {items.map(item => (\r\n               <div key={item.id} className=\"flex justify-between items-center text-sm border-b border-gray-50 pb-3\">\r\n                  <span className=\"font-bold text-gray-900 uppercase text-xs\">{item.quantity}x {item.product_name}</span>\r\n                  <span className=\"font-black text-gray-900\">₦{item.price.toLocaleString()}</span>\r\n               </div>\r\n             ))}\r\n          </div>\r\n\r\n          <div className=\"space-y-2 pt-6 border-t border-gray-100 mb-6\">\r\n             <div className=\"flex justify-between items-center text-xs font-bold text-gray-400 uppercase tracking-widest\"><span>Subtotal</span><span>₦{subTotal.toLocaleString()}</span></div>\r\n             {order.coins_redeemed > 0 && (\r\n               <div className=\"flex justify-between items-center text-xs font-black text-amber-600 uppercase tracking-widest\">\r\n                  <span className=\"flex items-center gap-1\"><Coins size={14} fill=\"currentColor\"/> Empire Coins</span>\r\n                  <span>-₦{order.coins_redeemed.toLocaleString()}</span>\r\n               </div>\r\n             )}\r\n             <div className=\"flex justify-between items-center text-2xl font-black text-gray-900 tracking-tighter pt-2\">\r\n                <span className=\"uppercase text-sm tracking-widest text-gray-400\">Net Payable</span>\r\n                <span className=\"text-emerald-600 font-black\">₦{order.total_amount.toLocaleString()}</span>\r\n             </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6 bg-white border-t border-gray-50 grid grid-cols-2 gap-4 sticky bottom-0\">\r\n           {localStatus === 'completed' ? (\r\n             <button onClick={downloadReceipt} className=\"col-span-2 py-4 bg-gray-900 text-white rounded-[1.5rem] font-black uppercase text-[10px] tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-emerald-600 transition-all active:scale-95 shadow-xl\"><Download size={18} /> Download Receipt</button>\r\n           ) : localStatus === 'cancelled' ? (\r\n             <button disabled className=\"col-span-2 py-4 bg-gray-50 text-gray-300 rounded-[1.5rem] font-black uppercase text-[10px] tracking-[0.2em] flex items-center justify-center gap-3 border border-gray-100\">Cancelled</button>\r\n           ) : (\r\n             <>\r\n               <button disabled={isProcessing} onClick={() => updateStatus('cancelled')} className=\"py-4 bg-white border-2 border-red-50 text-red-600 rounded-[1.5rem] font-black uppercase text-[10px] tracking-[0.2em] flex items-center justify-center\">\r\n                 {isProcessing ? <Loader2 className=\"animate-spin\" size={16}/> : \"Cancel\"}\r\n               </button>\r\n               <button disabled={isProcessing} onClick={() => updateStatus('completed')} className=\"py-4 bg-emerald-600 text-white rounded-[1.5rem] font-black uppercase text-[10px] tracking-[0.2em] flex items-center justify-center shadow-lg\">\r\n                 {isProcessing ? <Loader2 className=\"animate-spin\" size={16}/> : \"Mark Paid\"}\r\n               </button>\r\n             </>\r\n           )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/app/dashboard/orders/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { \r\n  ShoppingBag, Loader2, Search, Coins, TrendingUp, \r\n  Wallet, FileSpreadsheet, Calendar \r\n} from \"lucide-react\";\r\nimport OrderDetailsModal from \"@/components/dashboard/OrderDetailsModal\";\r\n\r\nexport default function OrdersPage() {\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedOrder, setSelectedOrder] = useState<any>(null);\r\n  const [storeName, setStoreName] = useState(\"Your Store\");\r\n  const [search, setSearch] = useState(\"\");\r\n  \r\n  const [monthlyRevenue, setMonthlyRevenue] = useState(0);\r\n  const [totalCoinsGiven, setTotalCoinsGiven] = useState(0);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  async function fetchOrders() {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return;\r\n\r\n    const { data: store } = await supabase\r\n      .from('stores')\r\n      .select('id, name')\r\n      .eq('owner_id', user.id)\r\n      .single();\r\n\r\n    if (!store) return;\r\n    setStoreName(store.name);\r\n\r\n    const { data } = await supabase\r\n      .from('orders')\r\n      .select('*')\r\n      .eq('store_id', store.id)\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (data) {\r\n      setOrders(data);\r\n      calculateStats(data);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  const calculateStats = (allOrders: any[]) => {\r\n    const now = new Date();\r\n    const currentMonth = now.getMonth();\r\n    const currentYear = now.getFullYear();\r\n\r\n    const monthlyData = allOrders.filter(o => {\r\n      const orderDate = new Date(o.created_at);\r\n      return o.status === 'completed' && \r\n             orderDate.getMonth() === currentMonth && \r\n             orderDate.getFullYear() === currentYear;\r\n    });\r\n\r\n    const revenue = monthlyData.reduce((sum, o) => sum + (o.total_amount || 0), 0);\r\n    const coins = monthlyData.reduce((sum, o) => sum + (o.coins_redeemed || 0), 0);\r\n\r\n    setMonthlyRevenue(revenue);\r\n    setTotalCoinsGiven(coins);\r\n  };\r\n\r\n  const downloadStatement = () => {\r\n    const now = new Date();\r\n    const monthName = now.toLocaleString('default', { month: 'long' });\r\n    \r\n    let csvContent = \"Order ID,Date,Customer,Subtotal,Coins Used,Cash Paid,Status\\n\";\r\n\r\n    const currentMonthData = orders.filter(o => {\r\n      const d = new Date(o.created_at);\r\n      return o.status === 'completed' && d.getMonth() === now.getMonth();\r\n    });\r\n\r\n    currentMonthData.forEach(o => {\r\n      const subtotal = o.total_amount + (o.coins_redeemed || 0);\r\n      const row = [\r\n        o.id.slice(0, 8),\r\n        new Date(o.created_at).toLocaleDateString(),\r\n        o.customer_name.replace(/,/g, \"\"), \r\n        subtotal,\r\n        o.coins_redeemed || 0,\r\n        o.total_amount,\r\n        o.status\r\n      ].join(\",\");\r\n      csvContent += row + \"\\n\";\r\n    });\r\n\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", url);\r\n    link.setAttribute(\"download\", `StoreLink_Statement_${monthName}_${now.getFullYear()}.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const filteredOrders = orders.filter(o => \r\n      o.customer_name.toLowerCase().includes(search.toLowerCase()) ||\r\n      o.id.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex h-[50vh] items-center justify-center\">\r\n        <Loader2 className=\"animate-spin text-gray-300\" size={32}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 pb-12\">\r\n      {/* HEADER SECTION */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-end gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-black text-gray-900 tracking-tighter uppercase\">Orders</h1>\r\n          <p className=\"text-gray-500 font-medium\">Manage and track your customer orders.</p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n          <div className=\"relative flex-1 md:w-64\">\r\n             <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={18}/>\r\n             <input \r\n               className=\"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl outline-none focus:border-emerald-500 transition font-bold text-sm\"\r\n               placeholder=\"Search orders...\"\r\n               value={search}\r\n               onChange={e => setSearch(e.target.value)}\r\n             />\r\n          </div>\r\n          <button \r\n            onClick={downloadStatement}\r\n            className=\"p-3 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition shadow-sm text-gray-600 group\"\r\n            title=\"Download Statement\"\r\n          >\r\n            <FileSpreadsheet size={20} className=\"group-hover:text-emerald-600\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div className=\"bg-gray-900 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden\">\r\n          <div className=\"relative z-10\">\r\n            <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400 mb-1\">True Profit (This Month)</p>\r\n            <h2 className=\"text-4xl font-black tracking-tighter\">₦{monthlyRevenue.toLocaleString()}</h2>\r\n            <div className=\"mt-4 flex items-center gap-2 text-[10px] font-bold text-emerald-400 uppercase tracking-widest\">\r\n               <TrendingUp size={14}/> Net Cash Received\r\n            </div>\r\n          </div>\r\n          <Wallet size={120} className=\"absolute -right-8 -bottom-8 text-white/5 rotate-12\" />\r\n        </div>\r\n\r\n        <div className=\"bg-white border-2 border-amber-100 p-6 rounded-[2rem] shadow-sm relative overflow-hidden\">\r\n          <div className=\"relative z-10\">\r\n            <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-amber-600 mb-1\">Empire Discounts Given</p>\r\n            <h2 className=\"text-4xl font-black text-gray-900 tracking-tighter\">₦{totalCoinsGiven.toLocaleString()}</h2>\r\n            <div className=\"mt-4 flex items-center gap-2 text-[10px] font-bold text-amber-500 uppercase tracking-widest\">\r\n               <Coins size={14} fill=\"currentColor\"/> Loyalty Contribution\r\n            </div>\r\n          </div>\r\n          <Coins size={120} className=\"absolute -right-8 -bottom-8 text-amber-500/5 -rotate-12\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white border border-gray-100 rounded-[2.5rem] overflow-hidden shadow-sm\">\r\n        {filteredOrders.length === 0 ? (\r\n           <div className=\"p-20 text-center text-gray-400\">\r\n             <ShoppingBag size={48} className=\"mx-auto mb-4 opacity-20\"/>\r\n             <p className=\"font-bold uppercase text-[10px] tracking-widest\">No orders found.</p>\r\n           </div>\r\n        ) : (\r\n           <div className=\"overflow-x-auto\">\r\n             <table className=\"w-full text-left min-w-[850px]\">\r\n               <thead className=\"bg-gray-50/50 border-b border-gray-100 text-[10px] uppercase text-gray-400 tracking-widest\">\r\n                 <tr>\r\n                   <th className=\"px-6 py-5 font-black\">Order ID</th>\r\n                   <th className=\"px-6 py-5 font-black\">Customer</th>\r\n                   <th className=\"px-6 py-5 font-black\">Empire Coins</th>\r\n                   <th className=\"px-6 py-5 font-black\">Cash Total</th>\r\n                   <th className=\"px-6 py-5 font-black\">Status</th>\r\n                   <th className=\"px-6 py-5 font-black\">Date</th>\r\n                   <th className=\"px-6 py-5 font-black text-right\">Action</th>\r\n                 </tr>\r\n               </thead>\r\n               <tbody className=\"divide-y divide-gray-100\">\r\n                 {filteredOrders.map((order) => (\r\n                   <tr key={order.id} className=\"hover:bg-gray-50/80 transition cursor-pointer group\" onClick={() => setSelectedOrder(order)}>\r\n                     <td className=\"px-6 py-4 font-mono text-[10px] text-gray-400\">#{order.id.slice(0, 8)}</td>\r\n                     <td className=\"px-6 py-4 font-bold text-gray-900 text-sm\">{order.customer_name}</td>\r\n                     <td className=\"px-6 py-4\">\r\n                        {order.coins_redeemed > 0 ? (\r\n                          <div className=\"flex items-center gap-1.5 text-amber-600 font-black text-sm\">\r\n                            <Coins size={14} fill=\"currentColor\" />\r\n                            <span>-₦{order.coins_redeemed.toLocaleString()}</span>\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-gray-300 text-xs\">—</span>\r\n                        )}\r\n                     </td>\r\n                     <td className=\"px-6 py-4 text-emerald-700 font-black text-sm\">₦{order.total_amount.toLocaleString()}</td>\r\n                     <td className=\"px-6 py-4\">\r\n                        <span className={`px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-tight ${\r\n                          order.status === 'completed' ? 'bg-emerald-100 text-emerald-700' :\r\n                          order.status === 'pending' ? 'bg-amber-100 text-amber-700' :\r\n                          'bg-red-100 text-red-700'\r\n                        }`}>\r\n                          {order.status === 'completed' ? 'Paid' : order.status}\r\n                        </span>\r\n                     </td>\r\n                     <td className=\"px-6 py-4 text-xs font-bold text-gray-500\">{new Date(order.created_at).toLocaleDateString()}</td>\r\n                     <td className=\"px-6 py-4 text-right\">\r\n                       <button className=\"text-[10px] font-black uppercase tracking-widest text-gray-400 border border-gray-100 px-4 py-2 rounded-xl group-hover:bg-gray-900 group-hover:text-white group-hover:border-gray-900 transition-all\">\r\n                         View\r\n                       </button>\r\n                     </td>\r\n                   </tr>\r\n                 ))}\r\n               </tbody>\r\n             </table>\r\n           </div>\r\n        )}\r\n      </div>\r\n\r\n      <OrderDetailsModal \r\n          order={selectedOrder}\r\n          storeName={storeName} \r\n          isOpen={!!selectedOrder}\r\n          onClose={() => setSelectedOrder(null)}\r\n          onUpdate={fetchOrders}\r\n       />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AARA;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAM;IACxD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,2HAAQ,CAAC,IAAI,CAAC,OAAO;QACtD,IAAI,CAAC,MAAM;QAEX,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,2HAAQ,CACnC,IAAI,CAAC,UACL,MAAM,CAAC,YACP,EAAE,CAAC,YAAY,KAAK,EAAE,EACtB,MAAM;QAET,IAAI,CAAC,OAAO;QACZ,aAAa,MAAM,IAAI;QAEvB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,2HAAQ,CAC5B,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,MAAM,EAAE,EACvB,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,MAAM;YACR,UAAU;YACV,eAAe;QACjB;QACA,WAAW;IACb;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,eAAe,IAAI,QAAQ;QACjC,MAAM,cAAc,IAAI,WAAW;QAEnC,MAAM,cAAc,UAAU,MAAM,CAAC,CAAA;YACnC,MAAM,YAAY,IAAI,KAAK,EAAE,UAAU;YACvC,OAAO,EAAE,MAAM,KAAK,eACb,UAAU,QAAQ,OAAO,gBACzB,UAAU,WAAW,OAAO;QACrC;QAEA,MAAM,UAAU,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,YAAY,IAAI,CAAC,GAAG;QAC5E,MAAM,QAAQ,YAAY,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,cAAc,IAAI,CAAC,GAAG;QAE5E,kBAAkB;QAClB,mBAAmB;IACrB;IAEA,MAAM,oBAAoB;QACxB,MAAM,MAAM,IAAI;QAChB,MAAM,YAAY,IAAI,cAAc,CAAC,WAAW;YAAE,OAAO;QAAO;QAEhE,IAAI,aAAa;QAEjB,MAAM,mBAAmB,OAAO,MAAM,CAAC,CAAA;YACrC,MAAM,IAAI,IAAI,KAAK,EAAE,UAAU;YAC/B,OAAO,EAAE,MAAM,KAAK,eAAe,EAAE,QAAQ,OAAO,IAAI,QAAQ;QAClE;QAEA,iBAAiB,OAAO,CAAC,CAAA;YACvB,MAAM,WAAW,EAAE,YAAY,GAAG,CAAC,EAAE,cAAc,IAAI,CAAC;YACxD,MAAM,MAAM;gBACV,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG;gBACd,IAAI,KAAK,EAAE,UAAU,EAAE,kBAAkB;gBACzC,EAAE,aAAa,CAAC,OAAO,CAAC,MAAM;gBAC9B;gBACA,EAAE,cAAc,IAAI;gBACpB,EAAE,YAAY;gBACd,EAAE,MAAM;aACT,CAAC,IAAI,CAAC;YACP,cAAc,MAAM;QACtB;QAEA,MAAM,OAAO,IAAI,KAAK;YAAC;SAAW,EAAE;YAAE,MAAM;QAA0B;QACtE,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,YAAY,CAAC,QAAQ;QAC1B,KAAK,YAAY,CAAC,YAAY,CAAC,oBAAoB,EAAE,UAAU,CAAC,EAAE,IAAI,WAAW,GAAG,IAAI,CAAC;QACzF,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;IAEA,MAAM,iBAAiB,OAAO,MAAM,CAAC,CAAA,IACjC,EAAE,aAAa,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW,OACzD,EAAE,EAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;IAGlD,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,4NAAO;gBAAC,WAAU;gBAA6B,MAAM;;;;;;;;;;;IAG5D;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAA+D;;;;;;0CAC7E,8OAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;kCAG3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACZ,8OAAC,gNAAM;wCAAC,WAAU;wCAAyD,MAAM;;;;;;kDACjF,8OAAC;wCACC,WAAU;wCACV,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAA,IAAK,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAG5C,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,OAAM;0CAEN,cAAA,8OAAC,+OAAe;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAK3C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAuE;;;;;;kDACpF,8OAAC;wCAAG,WAAU;;4CAAuC;4CAAE,eAAe,cAAc;;;;;;;kDACpF,8OAAC;wCAAI,WAAU;;0DACZ,8OAAC,gOAAU;gDAAC,MAAM;;;;;;4CAAK;;;;;;;;;;;;;0CAG5B,8OAAC,gNAAM;gCAAC,MAAM;gCAAK,WAAU;;;;;;;;;;;;kCAG/B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwE;;;;;;kDACrF,8OAAC;wCAAG,WAAU;;4CAAqD;4CAAE,gBAAgB,cAAc;;;;;;;kDACnG,8OAAC;wCAAI,WAAU;;0DACZ,8OAAC,6MAAK;gDAAC,MAAM;gDAAI,MAAK;;;;;;4CAAgB;;;;;;;;;;;;;0CAG3C,8OAAC,6MAAK;gCAAC,MAAM;gCAAK,WAAU;;;;;;;;;;;;;;;;;;0BAIhC,8OAAC;gBAAI,WAAU;0BACZ,eAAe,MAAM,KAAK,kBACxB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,mOAAW;4BAAC,MAAM;4BAAI,WAAU;;;;;;sCACjC,8OAAC;4BAAE,WAAU;sCAAkD;;;;;;;;;;;yCAGjE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAM,WAAU;;0CACf,8OAAC;gCAAM,WAAU;0CACf,cAAA,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAuB;;;;;;sDACrC,8OAAC;4CAAG,WAAU;sDAAkC;;;;;;;;;;;;;;;;;0CAGpD,8OAAC;gCAAM,WAAU;0CACd,eAAe,GAAG,CAAC,CAAC,sBACnB,8OAAC;wCAAkB,WAAU;wCAAsD,SAAS,IAAM,iBAAiB;;0DACjH,8OAAC;gDAAG,WAAU;;oDAAgD;oDAAE,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG;;;;;;;0DAClF,8OAAC;gDAAG,WAAU;0DAA6C,MAAM,aAAa;;;;;;0DAC9E,8OAAC;gDAAG,WAAU;0DACV,MAAM,cAAc,GAAG,kBACtB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,6MAAK;4DAAC,MAAM;4DAAI,MAAK;;;;;;sEACtB,8OAAC;;gEAAK;gEAAG,MAAM,cAAc,CAAC,cAAc;;;;;;;;;;;;yEAG9C,8OAAC;oDAAK,WAAU;8DAAwB;;;;;;;;;;;0DAG7C,8OAAC;gDAAG,WAAU;;oDAAgD;oDAAE,MAAM,YAAY,CAAC,cAAc;;;;;;;0DACjG,8OAAC;gDAAG,WAAU;0DACX,cAAA,8OAAC;oDAAK,WAAW,CAAC,uEAAuE,EACvF,MAAM,MAAM,KAAK,cAAc,oCAC/B,MAAM,MAAM,KAAK,YAAY,gCAC7B,2BACA;8DACC,MAAM,MAAM,KAAK,cAAc,SAAS,MAAM,MAAM;;;;;;;;;;;0DAG1D,8OAAC;gDAAG,WAAU;0DAA6C,IAAI,KAAK,MAAM,UAAU,EAAE,kBAAkB;;;;;;0DACxG,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDAAO,WAAU;8DAAuM;;;;;;;;;;;;uCAzBpN,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;0BAqC9B,8OAAC,wJAAiB;gBACd,OAAO;gBACP,WAAW;gBACX,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,iBAAiB;gBAChC,UAAU;;;;;;;;;;;;AAIpB"}}]
}