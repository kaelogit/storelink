{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/StorePageWrapper.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport Image from 'next/image';\r\nimport { Store } from '@/types';\r\nimport { MapPin, Phone, MessageCircle, Info, X, Crown, Instagram, Tiktok, Copy, Check } from 'lucide-react';\r\n\r\nexport default function StoreHeader({ store }: { store: Store }) {\r\n    const [isInfoModalOpen, setIsInfoModalOpen] = useState(false);\r\n    const [copied, setCopied] = useState(false);\r\n    \r\n    // Subscription status\r\n    const isPremium = store.subscription_plan === 'premium';\r\n    const isDiamond = store.subscription_plan === 'diamond';\r\n\r\n    const handleCopyLink = () => {\r\n        navigator.clipboard.writeText(`${window.location.origin}/${store.slug}`);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    // Phone Number for WhatsApp Link\r\n    let cleanNumber = store.whatsapp_number.replace(/\\D/g, '');\r\n    if (cleanNumber.startsWith('0')) cleanNumber = '234' + cleanNumber.substring(1);\r\n    const whatsappLink = `https://wa.me/${cleanNumber}`;\r\n\r\n    return (\r\n        <div className=\"relative mb-8\">\r\n            {/* 1. Cover Image */}\r\n            <div className=\"w-full h-48 bg-gray-200 overflow-hidden relative\">\r\n                {store.cover_image_url ? (\r\n                    <Image \r\n                        src={store.cover_image_url} \r\n                        alt={`${store.name} cover`} \r\n                        fill \r\n                        className=\"object-cover\" \r\n                        priority \r\n                    />\r\n                ) : (\r\n                    <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n                        <ImageIcon size={48} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"max-w-6xl mx-auto px-4 md:px-8\">\r\n                {/* 2. Logo and Name Block */}\r\n                <div className=\"flex items-end -mt-16 mb-4\">\r\n                    <div className=\"relative w-32 h-32 bg-white rounded-full border-4 border-white shadow-md overflow-hidden shrink-0\">\r\n                        {store.logo_url ? (\r\n                            <Image \r\n                                src={store.logo_url} \r\n                                alt={`${store.name} logo`} \r\n                                fill \r\n                                className=\"object-cover\" \r\n                            />\r\n                        ) : (\r\n                            <div className=\"flex items-center justify-center h-full text-gray-300\">\r\n                                <span className=\"text-4xl font-bold\">{store.name.charAt(0)}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"ml-4 pt-16 flex flex-col items-start w-full\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <h1 className=\"text-3xl font-extrabold text-gray-900\">{store.name}</h1>\r\n                            {(isPremium || isDiamond) && (\r\n                                <Crown \r\n                                    size={24} \r\n                                    className={`\r\n                                        ${isDiamond ? 'text-purple-600 fill-purple-600' : 'text-blue-500 fill-blue-500'} \r\n                                        shadow-lg\r\n                                    `} \r\n                                />\r\n                            )}\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-500 flex items-center gap-1 mt-1\">\r\n                            <MapPin size={14} /> {store.location}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 3. Action Buttons */}\r\n                <div className=\"flex flex-wrap gap-2 justify-between items-center pb-4 border-b border-gray-200\">\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        <a href={whatsappLink} target=\"_blank\" className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-xl font-bold text-sm hover:bg-green-700 transition\">\r\n                            <MessageCircle size={16} /> Chat Now\r\n                        </a>\r\n                        <button onClick={() => setIsInfoModalOpen(true)} className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-200 transition\">\r\n                            <Info size={16} /> Store Info\r\n                        </button>\r\n                    </div>\r\n                    \r\n                    <button onClick={handleCopyLink} className=\"flex items-center gap-2 px-4 py-2 text-gray-700 rounded-xl text-sm font-bold border border-gray-300 hover:bg-gray-50 transition\">\r\n                        {copied ? <Check size={16} className=\"text-green-500\"/> : <Copy size={16}/>} \r\n                        {copied ? \"Link Copied!\" : \"Copy Store Link\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* --- INFO MODAL --- */}\r\n            {isInfoModalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n                    <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl relative\">\r\n                        <div className=\"flex justify-between items-center mb-6\">\r\n                            <h2 className=\"font-bold text-xl text-gray-900\">{store.name} Details</h2>\r\n                            <button onClick={() => setIsInfoModalOpen(false)} className=\"p-2 bg-gray-100 rounded-full hover:bg-gray-200\"><X size={20}/></button>\r\n                        </div>\r\n                        \r\n                        <div className=\"space-y-4\">\r\n                            <p className=\"text-gray-700 text-sm italic\">{store.description || \"No description provided.\"}</p>\r\n                            \r\n                            <div className=\"pt-4 border-t border-gray-100 space-y-3\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <MapPin size={20} className=\"text-gray-500 shrink-0\" />\r\n                                    <span className=\"font-medium text-gray-700\">{store.location}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <Phone size={20} className=\"text-gray-500 shrink-0\" />\r\n                                    <span className=\"font-medium text-gray-700\">{store.whatsapp_number}</span>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"pt-4 border-t border-gray-100 space-y-3\">\r\n                                {store.instagram_handle && (\r\n                                    <a href={`https://instagram.com/${store.instagram_handle}`} target=\"_blank\" className=\"flex items-center gap-3 text-blue-600 hover:underline\">\r\n                                        <Instagram size={20} className=\"shrink-0\" />\r\n                                        <span>@{store.instagram_handle}</span>\r\n                                    </a>\r\n                                )}\r\n                                {store.tiktok_url && (\r\n                                    <a href={store.tiktok_url} target=\"_blank\" className=\"flex items-center gap-3 text-gray-900 hover:underline\">\r\n                                        <Tiktok size={20} className=\"shrink-0\" />\r\n                                        <span>TikTok Profile</span>\r\n                                    </a>\r\n                                )}\r\n                                {(!store.instagram_handle && !store.tiktok_url) && (\r\n                                    <p className=\"text-sm text-gray-500\">No social media links provided.</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/ViewTracker.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function ViewTracker({ storeId }: { storeId: string }) {\r\n  const hasCounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    // Prevent double counting in React Strict Mode or re-renders\r\n    if (hasCounted.current) return;\r\n    \r\n    const countView = async () => {\r\n      hasCounted.current = true;\r\n      await supabase.rpc('increment_store_views', { row_id: storeId });\r\n    };\r\n\r\n    countView();\r\n  }, [storeId]);\r\n\r\n  return null; // It renders nothing visibly\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKe,SAAS,YAAY,EAAE,OAAO,EAAuB;IAClE,MAAM,aAAa,IAAA,+MAAM,EAAC;IAE1B,IAAA,kNAAS,EAAC;QACR,6DAA6D;QAC7D,IAAI,WAAW,OAAO,EAAE;QAExB,MAAM,YAAY;YAChB,WAAW,OAAO,GAAG;YACrB,MAAM,2HAAQ,CAAC,GAAG,CAAC,yBAAyB;gBAAE,QAAQ;YAAQ;QAChE;QAEA;IACF,GAAG;QAAC;KAAQ;IAEZ,OAAO,MAAM,6BAA6B;AAC5C"}}]
}