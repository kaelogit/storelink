{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/supabase.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\n\r\n\r\nexport const supabase = createBrowserClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n)"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGO,MAAM,WAAW,IAAA,2MAAmB"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/api/flyer/[slug]/route.tsx"],"sourcesContent":["import { ImageResponse } from 'next/og';\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport QRCode from 'qrcode';\r\n\r\nexport const runtime = 'edge';\r\n\r\nexport async function GET(\r\n  request: Request,\r\n  { params }: { params: Promise<{ slug: string }> }\r\n) {\r\n  const { slug } = await params;\r\n  const storeUrl = `https://storelink.ng/s/${slug}`;\r\n\r\n  // 1. Fetch Store Data\r\n  const { data: store } = await supabase\r\n    .from('stores')\r\n    .select('id, name, location, slug')\r\n    .eq('slug', slug)\r\n    .single();\r\n\r\n  if (!store) return new Response(\"Store not found\", { status: 404 });\r\n\r\n  // 2. Fetch Latest Products and Pick 4 Randomly\r\n  const { data: allProducts } = await supabase\r\n    .from('storefront_products')\r\n    .select('id, name, price, image_url, image_urls')\r\n    .eq('store_id', store.id)\r\n    .limit(20);\r\n\r\n  const selectedProducts = allProducts \r\n    ? [...allProducts].sort(() => 0.5 - Math.random()).slice(0, 4) \r\n    : [];\r\n\r\n  // 3. Generate High-Res QR Code\r\n  const qrCodeDataUri = await QRCode.toDataURL(storeUrl, {\r\n    width: 600,\r\n    margin: 1,\r\n    color: { dark: '#111827', light: '#ffffff' },\r\n  });\r\n\r\n  return new ImageResponse(\r\n    (\r\n      <div\r\n        style={{\r\n          height: '100%',\r\n          width: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          backgroundColor: '#ffffff',\r\n          fontFamily: 'sans-serif',\r\n        }}\r\n      >\r\n        {/* ================= HEADER: BRANDING & TITLE ================= */}\r\n        <div style={{ display: 'flex', flexDirection: 'column', backgroundColor: '#111827', padding: '80px 80px 100px 80px' }}>\r\n          \r\n          {/* THE NAV LOGO DESIGN: Emerald Icon + StoreLink Text */}\r\n          <div style={{ display: 'flex', alignItems: 'center', marginBottom: '60px' }}>\r\n            <div style={{ display: 'flex', color: '#10b981', marginRight: '15px' }}>\r\n              <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <rect width=\"7\" height=\"9\" x=\"3\" y=\"3\" rx=\"1\" />\r\n                <rect width=\"7\" height=\"5\" x=\"14\" y=\"3\" rx=\"1\" />\r\n                <rect width=\"7\" height=\"9\" x=\"14\" y=\"12\" rx=\"1\" />\r\n                <rect width=\"7\" height=\"5\" x=\"3\" y=\"16\" rx=\"1\" />\r\n              </svg>\r\n            </div>\r\n            <span style={{ fontSize: '42px', fontWeight: '900', color: '#ffffff', letterSpacing: '-1.5px' }}>StoreLink</span>\r\n          </div>\r\n\r\n          <h1 style={{ fontSize: '140px', fontWeight: '900', color: '#ffffff', textTransform: 'uppercase', fontStyle: 'italic', lineHeight: '0.85', margin: 0, letterSpacing: '-6px' }}>\r\n            {store.name}\r\n          </h1>\r\n          \r\n          <div style={{ display: 'flex', alignItems: 'center', marginTop: '40px' }}>\r\n            <div style={{ backgroundColor: '#10b981', padding: '8px 20px', borderRadius: '12px', marginRight: '20px' }}>\r\n                <span style={{ fontSize: '24px', fontWeight: '900', color: '#111827' }}>LOCATION</span>\r\n            </div>\r\n            <span style={{ fontSize: '48px', fontWeight: '700', color: '#9ca3af', textTransform: 'uppercase' }}>{store.location || \"Lagos, Nigeria\"}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ================= BODY: 2x2 PRODUCT GRID ================= */}\r\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column', padding: '80px', backgroundColor: '#f9fafb' }}>\r\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '40px', justifyContent: 'center' }}>\r\n            {selectedProducts.map((p: any) => (\r\n              <div key={p.id} style={{ width: '480px', display: 'flex', flexDirection: 'column', backgroundColor: '#ffffff', borderRadius: '40px', padding: '30px', boxShadow: '0 20px 50px -15px rgba(0,0,0,0.08)' }}>\r\n                <img \r\n                  src={p.image_urls?.[0] || p.image_url} \r\n                  style={{ width: '420px', height: '420px', borderRadius: '25px', objectFit: 'cover', marginBottom: '30px' }} \r\n                />\r\n                <span style={{ fontSize: '36px', fontWeight: '900', color: '#111827', marginBottom: '10px', height: '80px', overflow: 'hidden', lineHeight: '1.1' }}>{p.name}</span>\r\n                <span style={{ fontSize: '48px', fontWeight: '900', color: '#10b981' }}>â‚¦{p.price.toLocaleString()}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ================= FOOTER: QR CODE & URL ================= */}\r\n        <div style={{ display: 'flex', padding: '80px', alignItems: 'center', justifyContent: 'space-between', backgroundColor: '#ffffff', borderTop: '4px solid #10b981' }}>\r\n          <div style={{ display: 'flex', flexDirection: 'column', flex: 1 }}>\r\n            <span style={{ fontSize: '70px', fontWeight: '900', color: '#111827', lineHeight: '1' }}>SCAN TO SHOP</span>\r\n            <span style={{ fontSize: '32px', fontWeight: '700', color: '#6b7280', marginTop: '20px', maxWidth: '500px' }}>\r\n                Scan the code to browse our full catalogue and order instantly via WhatsApp.\r\n            </span>\r\n            <div style={{ marginTop: '40px', display: 'flex' }}>\r\n                <div style={{ backgroundColor: '#f3f4f6', padding: '20px 40px', borderRadius: '25px', fontSize: '32px', fontWeight: '900', color: '#111827' }}>\r\n                    storelink.ng/s/{slug}\r\n                </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ padding: '25px', backgroundColor: '#ffffff', borderRadius: '40px', border: '8px solid #111827' }}>\r\n             <img src={qrCodeDataUri} width=\"320\" height=\"320\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ),\r\n    {\r\n      width: 1240, // A4 Portrait high-fidelity\r\n      height: 1754,\r\n    }\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}