{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/utils/imageCompressor.ts"],"sourcesContent":["import imageCompression from 'browser-image-compression';\r\n\r\nexport const compressImage = async (file: File) => {\r\n  const options = {\r\n    maxSizeMB: 0.3,          // Max size: 300KB\r\n    maxWidthOrHeight: 1080,  // Max width/height: 1080px (Standard HD)\r\n    useWebWorker: true,      // Runs faster\r\n  };\r\n\r\n  try {\r\n    const compressedFile = await imageCompression(file, options);\r\n    return compressedFile;\r\n  } catch (error) {\r\n    console.error(\"Image compression failed:\", error);\r\n    return file; // If it fails, return original file so upload doesn't break\r\n  }\r\n};"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,UAAU;QACd,WAAW;QACX,kBAAkB;QAClB,cAAc;IAChB;IAEA,IAAI;QACF,MAAM,iBAAiB,MAAM,IAAA,yMAAgB,EAAC,MAAM;QACpD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,MAAM,4DAA4D;IAC3E;AACF"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/utils/removeBackground.ts"],"sourcesContent":["export async function removeBackground(imageFile: File): Promise<Blob> {\r\n  const formData = new FormData();\r\n  formData.append(\"image_file\", imageFile);\r\n  formData.append(\"size\", \"auto\");\r\n\r\n  const apiKey = process.env.NEXT_PUBLIC_REMOVE_BG_KEY;\r\n\r\n  if (!apiKey) {\r\n    throw new Error(\"Missing remove.bg API Key\");\r\n  }\r\n\r\n  const response = await fetch(\"https://api.remove.bg/v1.0/removebg\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"X-Api-Key\": apiKey,\r\n    },\r\n    body: formData,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to remove background\");\r\n  }\r\n\r\n  return await response.blob(); // Returns the clean image as a Blob\r\n}"],"names":[],"mappings":";;;;AAKiB;AALV,eAAe,iBAAiB,SAAe;IACpD,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,cAAc;IAC9B,SAAS,MAAM,CAAC,QAAQ;IAExB,MAAM;IAEN;;IAIA,MAAM,WAAW,MAAM,MAAM,uCAAuC;QAClE,QAAQ;QACR,SAAS;YACP,aAAa;QACf;QACA,MAAM;IACR;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,MAAM,SAAS,IAAI,IAAI,oCAAoC;AACpE"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/AddProductModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { X, Loader2, Trash2, Plus, Lock, Crown, Sparkles } from \"lucide-react\";\r\nimport { compressImage } from \"@/utils/imageCompressor\";\r\nimport { removeBackground } from \"@/utils/removeBackground\"; \r\n\r\ninterface AddProductModalProps {\r\n  storeId: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n  productToEdit?: any;\r\n}\r\n\r\nexport default function AddProductModal({ storeId, isOpen, onClose, onSuccess, productToEdit }: AddProductModalProps) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState<{ id: string; name: string }[]>([]);\r\n  \r\n  const [isLimitReached, setIsLimitReached] = useState(false);\r\n  const [isExpired, setIsExpired] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  \r\n  const [removeBg, setRemoveBg] = useState(false);\r\n  const [processingImages, setProcessingImages] = useState(false);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    stock: \"1\",\r\n    description: \"\",\r\n    categoryId: \"\",\r\n  });\r\n  \r\n  const [imageFiles, setImageFiles] = useState<File[]>([]);\r\n  const [previews, setPreviews] = useState<string[]>([]);\r\n  const [existingImages, setExistingImages] = useState<string[]>([]); \r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setRemoveBg(false);\r\n      \r\n      if (productToEdit) {\r\n        setFormData({\r\n          name: productToEdit.name,\r\n          price: productToEdit.price.toString(),\r\n          stock: productToEdit.stock_quantity.toString(),\r\n          description: productToEdit.description || \"\",\r\n          categoryId: productToEdit.category_id || \"\",\r\n        });\r\n        setExistingImages(productToEdit.image_urls || []);\r\n        setPreviews([]);\r\n        setImageFiles([]);\r\n      } else {\r\n        setFormData({ name: \"\", price: \"\", stock: \"1\", description: \"\", categoryId: \"\" });\r\n        setExistingImages([]);\r\n        setPreviews([]);\r\n        setImageFiles([]);\r\n      }\r\n\r\n      const loadData = async () => {\r\n        const { data: cats } = await supabase.from(\"categories\").select(\"*\").eq(\"store_id\", storeId);\r\n        setCategories(cats || []);\r\n\r\n        const { data: store } = await supabase\r\n          .from(\"stores\")\r\n          .select(\"subscription_plan, subscription_expiry\")\r\n          .eq(\"id\", storeId)\r\n          .single();\r\n        \r\n        const plan = store?.subscription_plan || 'free';\r\n        const expiry = store?.subscription_expiry;\r\n\r\n        if (plan !== 'free' && expiry && new Date(expiry) < new Date()) {\r\n           setIsExpired(true);\r\n        } else {\r\n           setIsExpired(false);\r\n        }\r\n\r\n        if (!productToEdit) {\r\n            const { count } = await supabase\r\n              .from(\"products\")\r\n              .select(\"*\", { count: 'exact', head: true }) \r\n              .eq(\"store_id\", storeId);\r\n            \r\n            if (plan === 'free' && (count || 0) >= 5) {\r\n              setIsLimitReached(true);\r\n            } else {\r\n              setIsLimitReached(false);\r\n            }\r\n        } else {\r\n            setIsLimitReached(false); \r\n        }\r\n      };\r\n      \r\n      loadData();\r\n    }\r\n  }, [isOpen, storeId, productToEdit]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const newRawFiles = Array.from(e.target.files);\r\n      const totalImages = existingImages.length + imageFiles.length + newRawFiles.length;\r\n      \r\n      if (totalImages > 4) {\r\n          setErrorMsg(\"Max 4 images allowed\"); setTimeout(() => setErrorMsg(\"\"), 3000);\r\n          return;\r\n      }\r\n\r\n      // If AI Toggle is ON, process images\r\n      if (removeBg) {\r\n        setProcessingImages(true);\r\n        const processedFiles: File[] = [];\r\n\r\n        try {\r\n            for (const file of newRawFiles) {\r\n                const blob = await removeBackground(file);\r\n                const newFile = new File([blob], file.name.replace(/\\.[^/.]+$/, \"\") + \".png\", { type: \"image/png\" });\r\n                processedFiles.push(newFile);\r\n            }\r\n            \r\n            const combinedFiles = [...imageFiles, ...processedFiles];\r\n            setImageFiles(combinedFiles);\r\n            setPreviews(combinedFiles.map(file => URL.createObjectURL(file)));\r\n\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            setErrorMsg(\"Background removal failed. Try another picture\");\r\n        } finally {\r\n            setProcessingImages(false);\r\n        }\r\n\r\n      } else {\r\n        const combinedFiles = [...imageFiles, ...newRawFiles];\r\n        setImageFiles(combinedFiles);\r\n        setPreviews(combinedFiles.map(file => URL.createObjectURL(file)));\r\n      }\r\n    }\r\n  };\r\n\r\n  const removeNewImage = (index: number) => {\r\n    const newFiles = imageFiles.filter((_, i) => i !== index);\r\n    setImageFiles(newFiles);\r\n    setPreviews(newFiles.map(file => URL.createObjectURL(file)));\r\n  };\r\n\r\n  const removeExistingImage = (index: number) => {\r\n    setExistingImages(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if ((isLimitReached && !productToEdit) || isExpired) return; \r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const uploadedUrls: string[] = [];\r\n      \r\n      for (const file of imageFiles) {\r\n        const compressedFile = await compressImage(file);\r\n\r\n        const fileName = `${storeId}/${Date.now()}-${Math.random().toString(36).substring(7)}`;\r\n        \r\n        const { error } = await supabase.storage.from(\"products\").upload(fileName, compressedFile);\r\n        \r\n        if (error) throw error;\r\n        \r\n        const { data } = supabase.storage.from(\"products\").getPublicUrl(fileName);\r\n        uploadedUrls.push(data.publicUrl);\r\n      }\r\n\r\n      const finalImageUrls = [...existingImages, ...uploadedUrls];\r\n\r\n      if (productToEdit) {\r\n          const { error } = await supabase.from(\"products\").update({\r\n            name: formData.name,\r\n            price: parseFloat(formData.price),\r\n            stock_quantity: parseInt(formData.stock),\r\n            description: formData.description,\r\n            category_id: formData.categoryId || null,\r\n            image_urls: finalImageUrls,\r\n          }).eq(\"id\", productToEdit.id);\r\n          if (error) throw error;\r\n\r\n      } else {\r\n          const { error } = await supabase.from(\"products\").insert({\r\n            store_id: storeId,\r\n            name: formData.name,\r\n            price: parseFloat(formData.price),\r\n            stock_quantity: parseInt(formData.stock),\r\n            description: formData.description,\r\n            category_id: formData.categoryId || null,\r\n            image_urls: finalImageUrls,\r\n            is_active: true\r\n          });\r\n          if (error) throw error;\r\n      }\r\n\r\n      router.refresh(); \r\n      onSuccess();\r\n      onClose();\r\n\r\n    } catch (error: any) {\r\n      setErrorMsg(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-md rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        \r\n        <div className=\"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">{productToEdit ? \"Edit Product\" : \"Add Product\"}</h2>\r\n          <button onClick={onClose} className=\"p-2 bg-white rounded-full shadow-sm text-gray-500 hover:bg-gray-100 transition\"><X size={20} /></button>\r\n        </div>\r\n\r\n        {isExpired ? (\r\n           <div className=\"p-8 text-center flex flex-col items-center justify-center h-full\">\r\n              <div className=\"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-4\">\r\n                 <Lock size={32} className=\"text-red-400\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Subscription Expired</h3>\r\n              <button onClick={() => router.push(\"/dashboard/subscription\")} className=\"w-full bg-red-600 text-white py-4 rounded-xl font-bold shadow-lg\">\r\n                Renew Subscription\r\n              </button>\r\n           </div>\r\n\r\n        ) : (isLimitReached && !productToEdit) ? (\r\n          <div className=\"p-8 text-center flex flex-col items-center justify-center h-full\">\r\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4\">\r\n                 <Crown size={32} className=\"text-yellow-500 fill-yellow-500\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Free Limit Reached</h3>\r\n              <button onClick={() => router.push(\"/dashboard/subscription\")} className=\"w-full bg-gradient-to-r from-gray-900 to-gray-800 text-white py-4 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2\">\r\n                <Crown size={20} className=\"text-yellow-400\" /> Upgrade to Premium\r\n              </button>\r\n          </div>\r\n\r\n        ) : (\r\n          <div className=\"p-6 overflow-y-auto\">\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              \r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <label className=\"block text-sm font-bold text-gray-700\">Images (Max 4)</label>\r\n                    \r\n                    <button \r\n                        type=\"button\" \r\n                        onClick={() => setRemoveBg(!removeBg)}\r\n                        disabled={processingImages || existingImages.length + previews.length >= 4}\r\n                        className={`\r\n                            flex items-center gap-2 text-xs font-bold px-3 py-1.5 rounded-full transition border\r\n                            ${removeBg \r\n                                ? 'bg-purple-100 text-purple-700 border-purple-200 shadow-sm' \r\n                                : 'bg-gray-50 text-gray-500 border-gray-200 hover:bg-gray-100'}\r\n                        `}\r\n                    >\r\n                        <Sparkles size={14} className={removeBg ? \"animate-pulse\" : \"\"} />\r\n                        {removeBg ? \"AI Removal ON\" : \"Remove Background?\"}\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {existingImages.map((src, index) => (\r\n                    <div key={`existing-${index}`} className=\"aspect-square relative rounded-xl overflow-hidden border border-gray-200\">\r\n                      <img src={src} alt=\"Existing\" className=\"w-full h-full object-cover\" />\r\n                      <button type=\"button\" onClick={() => removeExistingImage(index)} className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600\"><Trash2 size={12} /></button>\r\n                    </div>\r\n                  ))}\r\n                  \r\n                  {previews.map((src, index) => (\r\n                    <div key={`new-${index}`} className=\"aspect-square relative rounded-xl overflow-hidden border border-gray-200 bg-gray-100\">\r\n                      <img src={src} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                      <button type=\"button\" onClick={() => removeNewImage(index)} className=\"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600\"><Trash2 size={12} /></button>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {processingImages && (\r\n                    <div className=\"aspect-square rounded-xl border border-gray-200 flex flex-col items-center justify-center bg-purple-50\">\r\n                        <Loader2 className=\"animate-spin text-purple-600 mb-1\" size={20} />\r\n                        <span className=\"text-[10px] font-bold text-purple-600\">AI working...</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  {(existingImages.length + previews.length) < 4 && !processingImages && (\r\n                    <label className={`\r\n                        aspect-square rounded-xl border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition\r\n                        ${removeBg ? 'border-purple-300 bg-purple-50 text-purple-400 hover:bg-purple-100' : 'border-gray-300 bg-gray-50 text-gray-400 hover:border-gray-900 hover:text-gray-900'}\r\n                    `}>\r\n                      {removeBg ? <Sparkles size={24} className=\"mb-1\"/> : <Plus size={24} className=\"mb-1\"/>}\r\n                      <input type=\"file\" accept=\"image/*\" multiple onChange={handleFileChange} className=\"hidden\" />\r\n                    </label>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Product Name</label>\r\n                <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"e.g. Nike Air Force\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-bold text-gray-700 mb-1\">Price (₦)</label>\r\n                    <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"50000\" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-bold text-gray-700 mb-1\">Stock Qty</label>\r\n                    <input required type=\"number\" className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"10\" value={formData.stock} onChange={e => setFormData({...formData, stock: e.target.value})} />\r\n                  </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Category</label>\r\n                <select \r\n                  className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-gray-900\"\r\n                  value={formData.categoryId}\r\n                  onChange={e => setFormData({...formData, categoryId: e.target.value})}\r\n                >\r\n                  <option value=\"\">No Category</option>\r\n                  {categories.map(cat => (\r\n                    <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-1\">\r\n                    <label className=\"block text-sm font-bold text-gray-700\">Description</label>\r\n                    <span className={`text-xs ${formData.description.length > 450 ? 'text-red-500' : 'text-gray-400'}`}>{formData.description.length}/500</span>\r\n                </div>\r\n                <textarea maxLength={500} className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl h-24 resize-none focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"Describe the item...\" value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} />\r\n              </div>\r\n              \r\n              {errorMsg && (\r\n                  <div className=\"text-red-600 text-sm font-bold text-center mb-4 bg-red-50 p-2 rounded-lg\">\r\n                      ⚠️ {errorMsg}\r\n                  </div>\r\n              )}\r\n              <button type=\"submit\" disabled={loading || processingImages} className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-gray-800 active:scale-95 transition disabled:opacity-70 disabled:cursor-not-allowed\">\r\n                {loading ? <Loader2 className=\"animate-spin\" /> : (productToEdit ? \"Update Product\" : \"Save Product\")}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 858, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/CategoryManager.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { X, Trash2, Plus, Loader2 } from \"lucide-react\";\r\n\r\ninterface CategoryManagerProps {\r\n  storeId: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void; \r\n}\r\n\r\nexport default function CategoryManager({ storeId, isOpen, onClose, onSuccess }: CategoryManagerProps) {\r\n  const [categories, setCategories] = useState<{ id: string; name: string }[]>([]);\r\n  const [newCat, setNewCat] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loadCats = async () => {\r\n    const { data } = await supabase.from(\"categories\").select(\"*\").eq(\"store_id\", storeId);\r\n    setCategories(data || []);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) loadCats();\r\n  }, [isOpen]);\r\n\r\n  const addCategory = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newCat.trim()) return;\r\n    setLoading(true);\r\n\r\n    const { error } = await supabase.from(\"categories\").insert({\r\n      store_id: storeId,\r\n      name: newCat.trim()\r\n    });\r\n\r\n    if (!error && onSuccess) onSuccess(); \r\n\r\n    setNewCat(\"\");\r\n    loadCats(); \r\n    setLoading(false);\r\n  };\r\n\r\n  const deleteCategory = async (id: string) => {\r\n    if (!confirm(\"Delete this category?\")) return;\r\n    const { error } = await supabase.from(\"categories\").delete().eq(\"id\", id);\r\n    \r\n    if (!error && onSuccess) onSuccess(); \r\n    \r\n    loadCats();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">Manage Categories</h2>\r\n          <button onClick={onClose}><X size={20} className=\"text-gray-500\" /></button>\r\n        </div>\r\n\r\n        <form onSubmit={addCategory} className=\"flex gap-2 mb-6\">\r\n          <input \r\n            className=\"flex-1 p-2 border border-gray-200 rounded-lg outline-none focus:ring-2 focus:ring-gray-900 text-sm\"\r\n            placeholder=\"New Category (e.g. Shoes)\"\r\n            value={newCat}\r\n            onChange={(e) => setNewCat(e.target.value)}\r\n          />\r\n          <button disabled={loading} className=\"bg-gray-900 text-white p-2 rounded-lg hover:bg-gray-800\">\r\n            {loading ? <Loader2 size={18} className=\"animate-spin\"/> : <Plus size={18} />}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n          {categories.length === 0 && <p className=\"text-gray-400 text-sm text-center\">No categories yet.</p>}\r\n          {categories.map((cat) => (\r\n            <div key={cat.id} className=\"flex justify-between items-center p-3 bg-gray-50 rounded-xl\">\r\n              <span className=\"font-medium text-gray-700 text-sm\">{cat.name}</span>\r\n              <button onClick={() => deleteCategory(cat.id)} className=\"text-red-400 hover:text-red-600\"><Trash2 size={16}/></button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;;;AAJA;;;;AAae,SAAS,gBAAgB,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAwB;;IACnG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAiC,EAAE;IAC/E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,WAAW;QACf,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC,KAAK,EAAE,CAAC,YAAY;QAC9E,cAAc,QAAQ,EAAE;IAC1B;IAEA,IAAA,0KAAS;qCAAC;YACR,IAAI,QAAQ;QACd;oCAAG;QAAC;KAAO;IAEX,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,IAAI,CAAC,OAAO,IAAI,IAAI;QACpB,WAAW;QAEX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC;YACzD,UAAU;YACV,MAAM,OAAO,IAAI;QACnB;QAEA,IAAI,CAAC,SAAS,WAAW;QAEzB,UAAU;QACV;QACA,WAAW;IACb;IAEA,MAAM,iBAAiB,OAAO;QAC5B,IAAI,CAAC,QAAQ,0BAA0B;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,GAAG,EAAE,CAAC,MAAM;QAEtE,IAAI,CAAC,SAAS,WAAW;QAEzB;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAkC;;;;;;sCAChD,6LAAC;4BAAO,SAAS;sCAAS,cAAA,6LAAC,oMAAC;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;;;;;;;8BAGnD,6LAAC;oBAAK,UAAU;oBAAa,WAAU;;sCACrC,6LAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;sCAE3C,6LAAC;4BAAO,UAAU;4BAAS,WAAU;sCAClC,wBAAU,6LAAC,+NAAO;gCAAC,MAAM;gCAAI,WAAU;;;;;qDAAmB,6LAAC,6MAAI;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAI3E,6LAAC;oBAAI,WAAU;;wBACZ,WAAW,MAAM,KAAK,mBAAK,6LAAC;4BAAE,WAAU;sCAAoC;;;;;;wBAC5E,WAAW,GAAG,CAAC,CAAC,oBACf,6LAAC;gCAAiB,WAAU;;kDAC1B,6LAAC;wCAAK,WAAU;kDAAqC,IAAI,IAAI;;;;;;kDAC7D,6LAAC;wCAAO,SAAS,IAAM,eAAe,IAAI,EAAE;wCAAG,WAAU;kDAAkC,cAAA,6LAAC,uNAAM;4CAAC,MAAM;;;;;;;;;;;;+BAFjG,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAS5B;GA1EwB;KAAA"}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/OrderDetailsModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { X, Printer, Download, CheckCircle, Lock } from \"lucide-react\"; \r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface OrderDetailsModalProps {\r\n  order: any;\r\n  storeName: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onUpdate: () => void;\r\n}\r\n\r\nexport default function OrderDetailsModal({ order, storeName, isOpen, onClose, onUpdate }: OrderDetailsModalProps) {\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (isOpen && order) {\r\n      const fetchItems = async () => {\r\n        const { data } = await supabase.from(\"order_items\").select(\"*\").eq(\"order_id\", order.id);\r\n        setItems(data || []);\r\n      };\r\n      fetchItems();\r\n    }\r\n  }, [isOpen, order]);\r\n\r\n  const updateStatus = async (status: string) => {\r\n    if (!confirm(`Mark order as ${status}?`)) return;\r\n    \r\n    await supabase.from(\"orders\").update({ status }).eq(\"id\", order.id);\r\n    \r\n    router.refresh();\r\n    onUpdate();\r\n    onClose();\r\n  };\r\n\r\n  const downloadReceipt = () => {\r\n    const doc = new jsPDF();\r\n\r\n    doc.setFillColor(17, 24, 39); \r\n    doc.rect(0, 0, 210, 24, 'F'); \r\n\r\n    doc.setTextColor(255, 255, 255); \r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"VERIFIED BY STORELINK™ SECURE CHECKOUT\", 105, 15, { align: \"center\" });\r\n\r\n    doc.setTextColor(0, 0, 0); \r\n    doc.setFontSize(24);\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(storeName.toUpperCase(), 105, 45, { align: \"center\" }); \r\n\r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(\"OFFICIAL RECEIPT\", 105, 52, { align: \"center\" });\r\n\r\n    doc.setDrawColor(200, 200, 200);\r\n    doc.line(14, 60, 196, 60); // Divider Line\r\n\r\n    doc.setFontSize(10);\r\n    doc.text(`Order #: ${order.id.slice(0, 8).toUpperCase()}`, 14, 70);\r\n    doc.text(`Date: ${new Date(order.created_at).toLocaleDateString()}`, 14, 76);\r\n    doc.text(`Status: ${order.status.toUpperCase()}`, 14, 82);\r\n\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"Bill To:\", 140, 70);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(order.customer_name, 140, 76);\r\n    doc.text(order.customer_phone, 140, 82);\r\n    const splitAddress = doc.splitTextToSize(order.customer_address, 60);\r\n    doc.text(splitAddress, 140, 88);\r\n\r\n    const tableData = items.map(item => [\r\n      item.product_name,\r\n      item.quantity,\r\n      `N${item.price.toLocaleString()}`,\r\n      `N${(item.price * item.quantity).toLocaleString()}`\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n      startY: 105,\r\n      head: [['Item', 'Qty', 'Price', 'Total']],\r\n      body: tableData,\r\n      theme: 'grid',\r\n      headStyles: { fillColor: [17, 24, 39], textColor: [255, 255, 255], fontStyle: 'bold' },\r\n      columnStyles: {\r\n        0: { cellWidth: 80 }, \r\n        3: { fontStyle: 'bold' } \r\n      }\r\n    });\r\n\r\n    const finalY = (doc as any).lastAutoTable.finalY + 15;\r\n    \r\n    doc.setFontSize(14);\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"GRAND TOTAL:\", 140, finalY);\r\n    doc.setTextColor(16, 185, 129); // Emerald Green\r\n    doc.text(`N${order.total_amount.toLocaleString()}`, 196, finalY, { align: \"right\" });\r\n\r\n    doc.setTextColor(150, 150, 150);\r\n    doc.setFontSize(8);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(\"Thank you for your patronage.\", 105, 280, { align: \"center\" });\r\n    doc.text(\"Powered by StoreLink\", 105, 285, { align: \"center\" });\r\n\r\n    doc.save(`${storeName.replace(/\\s+/g, '_')}_Receipt_${order.id.slice(0,6)}.pdf`);\r\n  };\r\n\r\n  if (!isOpen || !order) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-lg rounded-3xl p-6 shadow-2xl relative\">\r\n        <button onClick={onClose} className=\"absolute top-4 right-4 p-2 bg-gray-100 rounded-full hover:bg-gray-200\"><X size={20}/></button>\r\n\r\n        <div className=\"text-center mb-6\">\r\n           <div className=\"inline-flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mb-3\">\r\n             <CheckCircle className=\"text-green-600\" size={24} />\r\n           </div>\r\n           <h2 className=\"font-bold text-xl text-gray-900\">Order Details</h2>\r\n           <p className=\"text-gray-500 text-xs mt-1\">ID: {order.id}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gray-50 p-4 rounded-xl mb-6 border border-gray-100\">\r\n           <div className=\"grid grid-cols-2 gap-4\">\r\n             <div>\r\n                <h3 className=\"font-bold text-xs text-gray-500 uppercase mb-1\">Customer</h3>\r\n                <p className=\"text-sm font-bold text-gray-900\">{order.customer_name}</p>\r\n                <p className=\"text-xs text-gray-500\">{order.customer_phone}</p>\r\n             </div>\r\n             <div className=\"text-right\">\r\n                <h3 className=\"font-bold text-xs text-gray-500 uppercase mb-1\">Status</h3>\r\n                <span className={`inline-block px-2 py-1 rounded text-xs font-bold capitalize ${\r\n                    order.status === 'completed' ? 'bg-green-100 text-green-700' :\r\n                    order.status === 'cancelled' ? 'bg-red-100 text-red-700' :\r\n                    'bg-yellow-100 text-yellow-700'\r\n                }`}>\r\n                    {order.status}\r\n                </span>\r\n             </div>\r\n           </div>\r\n           <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n             <h3 className=\"font-bold text-xs text-gray-500 uppercase mb-1\">Delivery Address</h3>\r\n             <p className=\"text-sm text-gray-700\">{order.customer_address}</p>\r\n           </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-3 mb-6 max-h-40 overflow-y-auto pr-2\">\r\n           {items.map(item => (\r\n             <div key={item.id} className=\"flex justify-between items-center text-sm border-b border-gray-50 pb-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                   <span className=\"font-bold text-gray-400\">{item.quantity}x</span>\r\n                   <span className=\"text-gray-900\">{item.product_name}</span>\r\n                </div>\r\n                <span className=\"font-bold text-gray-900\">₦{item.price.toLocaleString()}</span>\r\n             </div>\r\n           ))}\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center text-xl font-extrabold text-gray-900 mb-8 pt-4 border-t border-gray-100\">\r\n           <span>Total</span>\r\n           <span className=\"text-emerald-600\">₦{order.total_amount.toLocaleString()}</span>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n           {order.status === 'completed' ? (\r\n             <button onClick={downloadReceipt} className=\"col-span-2 py-3.5 bg-gray-900 text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-800 shadow-lg active:scale-95 transition\">\r\n               <Download size={18} /> Download Official Receipt\r\n             </button>\r\n           ) : (\r\n             <button disabled className=\"col-span-2 py-3.5 bg-gray-100 text-gray-400 rounded-xl font-bold flex items-center justify-center gap-2 border border-gray-200 cursor-not-allowed\">\r\n               <Lock size={18} /> Receipt Locked (Mark as Paid First)\r\n             </button>\r\n           )}\r\n           \r\n           {order.status === 'pending' && (\r\n             <>\r\n               <button onClick={() => updateStatus('cancelled')} className=\"py-3 bg-white border border-red-100 text-red-600 rounded-xl font-bold hover:bg-red-50 text-sm\">\r\n                 Cancel Order\r\n               </button>\r\n               <button onClick={() => updateStatus('completed')} className=\"py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 text-sm shadow-md\">\r\n                 Mark Paid\r\n               </button>\r\n             </>\r\n           )}\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1546, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/StoreSettings.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { Loader2, Save, Upload, Camera, Image as ImageIcon, CheckCircle2 } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\n\r\n// Added onUpdate to the props interface\r\nexport default function StoreSettings({ store, onUpdate }: { store: any, onUpdate?: () => void }) {\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: store.name,\r\n    description: store.description || \"\",\r\n    whatsapp: store.whatsapp_number,\r\n    location: store.location,\r\n    instagram: store.instagram_handle || \"\",\r\n    tiktok: store.tiktok_url || \"\", \r\n  });\r\n\r\n  const [logoFile, setLogoFile] = useState<File | null>(null);\r\n  const [coverFile, setCoverFile] = useState<File | null>(null);\r\n  \r\n  const [logoPreview, setLogoPreview] = useState<string>(store.logo_url || \"\");\r\n  const [coverPreview, setCoverPreview] = useState<string>(store.cover_image_url || \"\");\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  const handleLogoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      const file = e.target.files[0];\r\n      setLogoFile(file);\r\n      setLogoPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleCoverChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      const file = e.target.files[0];\r\n      setCoverFile(file);\r\n      setCoverPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const handleSave = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setStatus(\"\"); // Clear previous status\r\n\r\n    try {\r\n      let newLogoUrl = store.logo_url;\r\n      let newCoverUrl = store.cover_image_url;\r\n\r\n      if (logoFile) {\r\n        const fileName = `logos/${store.id}-${Date.now()}`;\r\n        const { error: uploadError } = await supabase.storage.from(\"products\").upload(fileName, logoFile);\r\n        if (uploadError) throw uploadError;\r\n        \r\n        const { data } = supabase.storage.from(\"products\").getPublicUrl(fileName);\r\n        newLogoUrl = data.publicUrl;\r\n      }\r\n\r\n      if (coverFile) {\r\n        const fileName = `covers/${store.id}-${Date.now()}`;\r\n        const { error: uploadError } = await supabase.storage.from(\"products\").upload(fileName, coverFile);\r\n        if (uploadError) throw uploadError;\r\n        \r\n        const { data } = supabase.storage.from(\"products\").getPublicUrl(fileName);\r\n        newCoverUrl = data.publicUrl;\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from(\"stores\")\r\n        .update({\r\n          name: formData.name,\r\n          description: formData.description,\r\n          whatsapp_number: formData.whatsapp,\r\n          location: formData.location,\r\n          instagram_handle: formData.instagram,\r\n          tiktok_url: formData.tiktok, \r\n          logo_url: newLogoUrl,\r\n          cover_image_url: newCoverUrl\r\n        })\r\n        .eq(\"id\", store.id);\r\n\r\n      if (error) {\r\n          setStatus(\"❌ \" + error.message);\r\n      } else {\r\n          setStatus(\"✅ Settings saved!\");\r\n          // Trigger the refresh in the Dashboard Brain\r\n          if (onUpdate) onUpdate(); \r\n          \r\n          setTimeout(() => setStatus(\"\"), 3000); \r\n      }\r\n    } catch (error) {\r\n      setStatus(\"❌ An error occurred\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-3xl relative\">\r\n      <h3 className=\"font-bold text-lg text-gray-900 mb-6\">Store Settings</h3>\r\n      \r\n      {status.includes(\"✅\") && (\r\n        <div className=\"fixed top-24 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4 fade-in duration-300\">\r\n          <div className=\"bg-emerald-600 text-white px-6 py-3 rounded-2xl shadow-2xl flex items-center gap-3 border border-emerald-500\">\r\n            <CheckCircle2 size={20} />\r\n            <span className=\"font-black text-xs uppercase tracking-widest\">Settings Saved Successfully</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSave} className=\"space-y-6\">\r\n        \r\n        <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm space-y-6\">\r\n           <h4 className=\"font-bold text-sm text-gray-500 uppercase tracking-wide\">Brand Visuals</h4>\r\n           \r\n           <div>\r\n             <label className=\"block text-sm font-bold text-gray-700 mb-2\">Cover Image</label>\r\n             <div className=\"relative w-full h-40 md:h-52 bg-gray-100 rounded-xl overflow-hidden border-2 border-dashed border-gray-300 group\">\r\n                {coverPreview ? (\r\n                  <img src={coverPreview} alt=\"Cover\" className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                  <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\r\n                    <ImageIcon size={32} />\r\n                    <span className=\"text-xs font-bold mt-2\">Upload Cover</span>\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center cursor-pointer\">\r\n                   <div className=\"bg-white/20 backdrop-blur-sm text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2\">\r\n                     <Camera size={18} /> Change Cover\r\n                   </div>\r\n                   <input type=\"file\" accept=\"image/*\" className=\"absolute inset-0 opacity-0 cursor-pointer\" onChange={handleCoverChange} />\r\n                </div>\r\n             </div>\r\n             <p className=\"text-xs text-gray-500 mt-1\">Recommended: 1200 x 400px</p>\r\n           </div>\r\n\r\n           <div>\r\n             <label className=\"block text-sm font-bold text-gray-700 mb-2\">Store Logo</label>\r\n             <div className=\"flex items-center gap-4\">\r\n               <div className=\"relative w-24 h-24 bg-gray-100 rounded-full overflow-hidden border-2 border-dashed border-gray-300 group shrink-0\">\r\n                  {logoPreview ? (\r\n                    <img src={logoPreview} alt=\"Logo\" className=\"w-full h-full object-cover\" />\r\n                  ) : (\r\n                    <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n                      <Upload size={24} />\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center cursor-pointer\">\r\n                     <Camera size={20} className=\"text-white\" />\r\n                     <input type=\"file\" accept=\"image/*\" className=\"absolute inset-0 opacity-0 cursor-pointer\" onChange={handleLogoChange} />\r\n                  </div>\r\n               </div>\r\n               <div className=\"text-sm text-gray-500\">\r\n                 <p>This will be displayed on your profile and receipts.</p>\r\n                 <p className=\"text-xs text-gray-400 mt-1\">Recommended: Square (400 x 400px)</p>\r\n               </div>\r\n             </div>\r\n           </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm space-y-4\">\r\n            <h4 className=\"font-bold text-sm text-gray-500 uppercase tracking-wide\">Store Details</h4>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Store Name</label>\r\n              <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">WhatsApp Number</label>\r\n                <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" value={formData.whatsapp} onChange={e => setFormData({...formData, whatsapp: e.target.value})} />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Location</label>\r\n                <input required className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" value={formData.location} onChange={e => setFormData({...formData, location: e.target.value})} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n               <div>\r\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">Instagram Handle (Optional)</label>\r\n                  <div className=\"relative\">\r\n                    <span className=\"absolute left-3 top-3.5 text-gray-400 font-bold\">@</span>\r\n                    <input className=\"w-full pl-8 pr-3 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"yourstore\" value={formData.instagram} onChange={e => setFormData({...formData, instagram: e.target.value})} />\r\n                  </div>\r\n               </div>\r\n               <div>\r\n                  <label className=\"block text-sm font-bold text-gray-700 mb-1\">TikTok Link (Optional)</label>\r\n                  <input className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900\" placeholder=\"https://tiktok.com/@...\" value={formData.tiktok} onChange={e => setFormData({...formData, tiktok: e.target.value})} />\r\n               </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Bio / Description</label>\r\n              <textarea className=\"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl h-24 resize-none focus:outline-none focus:ring-2 focus:ring-gray-900\" value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} />\r\n            </div>\r\n        </div>\r\n\r\n        {status.includes(\"❌\") && <p className=\"text-red-600 text-xs font-bold text-center\">{status}</p>}\r\n\r\n        <button type=\"submit\" disabled={loading} className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 hover:bg-gray-800 transition disabled:opacity-50\">\r\n          {loading ? <Loader2 className=\"animate-spin\" /> : <><Save size={18} /> Save Changes</>}\r\n        </button>\r\n\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2195, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/ShareStore.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Copy, Check, Share2, QrCode, X, Download } from \"lucide-react\";\r\nimport { QRCodeSVG } from \"qrcode.react\";\r\n\r\nexport default function ShareStore({ slug }: { slug: string }) {\r\n  const [copied, setCopied] = useState(false);\r\n  const [showQR, setShowQR] = useState(false);\r\n\r\n  const storeUrl = `https://storelink.ng/${slug}`;\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(storeUrl);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n  };\r\n\r\n  const downloadQR = () => {\r\n     const svg = document.getElementById(\"store-qr-code\");\r\n     if (svg) {\r\n        const svgData = new XMLSerializer().serializeToString(svg);\r\n        const canvas = document.createElement(\"canvas\");\r\n        const ctx = canvas.getContext(\"2d\");\r\n        const img = new Image();\r\n        img.onload = () => {\r\n           canvas.width = img.width;\r\n           canvas.height = img.height;\r\n           ctx?.drawImage(img, 0, 0);\r\n           const pngFile = canvas.toDataURL(\"image/png\");\r\n           const downloadLink = document.createElement(\"a\");\r\n           downloadLink.download = `${slug}-qr.png`;\r\n           downloadLink.href = pngFile;\r\n           downloadLink.click();\r\n        };\r\n        img.src = \"data:image/svg+xml;base64,\" + btoa(svgData);\r\n     }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bg-gradient-to-br from-emerald-900 to-emerald-700 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden\">\r\n         <div className=\"relative z-10\">\r\n            <h3 className=\"font-bold text-lg mb-1 flex items-center gap-2\">\r\n               <Share2 size={20} className=\"text-emerald-300\"/> Share Your Store\r\n            </h3>\r\n            <p className=\"text-emerald-100 text-sm mb-4\">Get customers to visit your link.</p>\r\n            \r\n            <div className=\"flex gap-2\">\r\n                <button \r\n                  onClick={handleCopy} \r\n                  className=\"flex-1 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 py-2.5 rounded-xl font-bold text-sm transition flex items-center justify-center gap-2\"\r\n                >\r\n                   {copied ? <Check size={16} /> : <Copy size={16} />} \r\n                   {copied ? \"Copied!\" : \"Copy Link\"}\r\n                </button>\r\n                <button \r\n                   onClick={() => setShowQR(true)}\r\n                   className=\"bg-white text-emerald-900 py-2.5 px-4 rounded-xl font-bold text-sm hover:bg-emerald-50 transition flex items-center gap-2\"\r\n                >\r\n                   <QrCode size={16} /> QR Code\r\n                </button>\r\n            </div>\r\n         </div>\r\n         \r\n         <Share2 size={120} className=\"absolute -bottom-6 -right-6 text-white/5 rotate-12\" />\r\n      </div>\r\n\r\n      {showQR && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in\">\r\n           <div className=\"bg-white w-full max-w-sm rounded-3xl p-6 text-center relative animate-in zoom-in-95\">\r\n              <button \r\n                onClick={() => setShowQR(false)} \r\n                className=\"absolute top-4 right-4 p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition\"\r\n              >\r\n                 <X size={20} />\r\n              </button>\r\n\r\n              <h3 className=\"font-bold text-xl text-gray-900 mb-2\">Your Store QR Code</h3>\r\n              <p className=\"text-gray-500 text-sm mb-6\">Customers can scan this to visit your store immediately.</p>\r\n\r\n              <div className=\"bg-white p-4 rounded-2xl border-2 border-gray-100 inline-block mb-6 shadow-sm\">\r\n                 <QRCodeSVG \r\n                    id=\"store-qr-code\"\r\n                    value={storeUrl} \r\n                    size={200} \r\n                    level={\"H\"}\r\n                    includeMargin={true}\r\n                 />\r\n              </div>\r\n\r\n              <div className=\"flex gap-2\">\r\n                 <button onClick={() => setShowQR(false)} className=\"flex-1 py-3 text-gray-500 font-bold hover:bg-gray-50 rounded-xl\">Close</button>\r\n                 <button onClick={() => window.print()} className=\"flex-1 bg-emerald-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-emerald-700 flex items-center justify-center gap-2\">\r\n                    <Download size={18} /> Print / Save\r\n                 </button>\r\n              </div>\r\n           </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAJA;;;;AAMe,SAAS,WAAW,EAAE,IAAI,EAAoB;;IAC3D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,WAAW,CAAC,qBAAqB,EAAE,MAAM;IAE/C,MAAM,aAAa;QACjB,UAAU,SAAS,CAAC,SAAS,CAAC;QAC9B,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACrC;IAEA,MAAM,aAAa;QAChB,MAAM,MAAM,SAAS,cAAc,CAAC;QACpC,IAAI,KAAK;YACN,MAAM,UAAU,IAAI,gBAAgB,iBAAiB,CAAC;YACtD,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,MAAM,MAAM,IAAI;YAChB,IAAI,MAAM,GAAG;gBACV,OAAO,KAAK,GAAG,IAAI,KAAK;gBACxB,OAAO,MAAM,GAAG,IAAI,MAAM;gBAC1B,KAAK,UAAU,KAAK,GAAG;gBACvB,MAAM,UAAU,OAAO,SAAS,CAAC;gBACjC,MAAM,eAAe,SAAS,aAAa,CAAC;gBAC5C,aAAa,QAAQ,GAAG,GAAG,KAAK,OAAO,CAAC;gBACxC,aAAa,IAAI,GAAG;gBACpB,aAAa,KAAK;YACrB;YACA,IAAI,GAAG,GAAG,+BAA+B,KAAK;QACjD;IACH;IAEA,qBACE;;0BACE,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAI,WAAU;;0CACZ,6LAAC;gCAAG,WAAU;;kDACX,6LAAC,uNAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAoB;;;;;;;0CAEnD,6LAAC;gCAAE,WAAU;0CAAgC;;;;;;0CAE7C,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCACC,SAAS;wCACT,WAAU;;4CAER,uBAAS,6LAAC,gNAAK;gDAAC,MAAM;;;;;qEAAS,6LAAC,6MAAI;gDAAC,MAAM;;;;;;4CAC3C,SAAS,YAAY;;;;;;;kDAEzB,6LAAC;wCACE,SAAS,IAAM,UAAU;wCACzB,WAAU;;0DAEV,6LAAC,uNAAM;gDAAC,MAAM;;;;;;4CAAM;;;;;;;;;;;;;;;;;;;kCAK9B,6LAAC,uNAAM;wBAAC,MAAM;wBAAK,WAAU;;;;;;;;;;;;YAG/B,wBACC,6LAAC;gBAAI,WAAU;0BACZ,cAAA,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC;4BACC,SAAS,IAAM,UAAU;4BACzB,WAAU;sCAET,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;sCAGZ,6LAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,6LAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAE1C,6LAAC;4BAAI,WAAU;sCACZ,cAAA,6LAAC,sKAAS;gCACP,IAAG;gCACH,OAAO;gCACP,MAAM;gCACN,OAAO;gCACP,eAAe;;;;;;;;;;;sCAIrB,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAO,SAAS,IAAM,UAAU;oCAAQ,WAAU;8CAAkE;;;;;;8CACrH,6LAAC;oCAAO,SAAS,IAAM,OAAO,KAAK;oCAAI,WAAU;;sDAC9C,6LAAC,yNAAQ;4CAAC,MAAM;;;;;;wCAAM;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1C;GAhGwB;KAAA"}},
    {"offset": {"line": 2464, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/DashboardClient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { \r\n  Package, ShoppingBag, Settings, Plus, ExternalLink, \r\n  Crown, AlertTriangle, Eye, TrendingUp, Tags, Edit, Trash2,\r\n  Lock, Sparkles, X, BarChart3, Calendar\r\n} from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport AddProductModal from \"@/components/store/AddProductModal\";\r\nimport CategoryManager from \"@/components/store/CategoryManager\";\r\nimport OrderDetailsModal from \"@/components/dashboard/OrderDetailsModal\";\r\nimport StoreSettings from \"@/components/dashboard/StoreSettings\";\r\nimport ShareStore from \"./ShareStore\";\r\nimport FlashDropModal from \"@/components/dashboard/FlashDropModal\";\r\n\r\ninterface DashboardClientProps {\r\n  store: any;\r\n  initialProducts: any[];\r\n  initialOrders: any[];\r\n  stats: { revenue: number; productCount: number; views: number };\r\n  isLocked: boolean; \r\n}\r\n\r\nexport default function DashboardClient({ store, initialProducts, initialOrders, stats, isLocked }: DashboardClientProps) {\r\n  const router = useRouter();\r\n  \r\n  const [activeTab, setActiveTab] = useState(\"products\");\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isCatModalOpen, setIsCatModalOpen] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState<any>(null);\r\n  const [productToEdit, setProductToEdit] = useState<any>(null);\r\n\r\n  const [isAnalyticsOpen, setIsAnalyticsOpen] = useState(false);\r\n\r\n  const isPremium = store.subscription_plan === 'premium';\r\n  const isDiamond = store.subscription_plan === 'diamond';\r\n  const isFree = store.subscription_plan === 'free';\r\n  const isFreeLimitReached = isFree && stats.productCount >= 5;\r\n\r\n  const deleteProduct = async (id: string) => {\r\n    if (!confirm(\"Are you sure you want to delete this product?\")) return;\r\n    const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\r\n    if (error) { console.error(error); alert(\"Could not delete product.\"); } \r\n    else { router.refresh(); }\r\n  };\r\n\r\n  const openEditModal = (product: any) => {\r\n    setProductToEdit(product);\r\n    setIsAddModalOpen(true);\r\n  };\r\n\r\n  const closeProductModal = () => {\r\n    setIsAddModalOpen(false);\r\n    setProductToEdit(null); \r\n  };\r\n\r\n  const [selectedFlashProduct, setSelectedFlashProduct] = useState<any>(null);\r\n\r\n  return (\r\n    <div className=\"space-y-6 px-1 md:px-0\">\r\n        <header className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div>\r\n            <h1 className=\"text-2xl md:text-3xl font-black text-gray-900 flex items-center gap-2 flex-wrap tracking-tight\">\r\n              Dashboard\r\n              {isLocked ? (\r\n                <span className=\"bg-red-100 text-red-700 text-[10px] px-2 py-1 rounded-md border border-red-200 whitespace-nowrap font-black uppercase flex items-center gap-1\">\r\n                  <Lock size={12} /> Store Offline\r\n                </span>\r\n              ) : (\r\n                <>\r\n                  {isDiamond && <span className=\"bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded-md border border-purple-200 whitespace-nowrap font-bold\">Diamond</span>}\r\n                  {isPremium && <span className=\"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-md border border-blue-200 whitespace-nowrap font-bold\">Premium</span>}\r\n                  {isFree && <span className=\"bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-md border border-gray-200 whitespace-nowrap font-bold\">Free</span>}\r\n                </>\r\n              )}\r\n            </h1>\r\n            <p className=\"text-gray-500 text-sm mt-1\">Welcome Back, <span className=\"font-bold text-gray-900\">{store.name}</span> (Manage your Empire)</p>\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap gap-2 w-full md:w-auto\">\r\n            {isLocked ? (\r\n              <Link href=\"/dashboard/subscription\" className=\"w-full md:w-auto flex items-center justify-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-xl text-sm font-black hover:bg-red-700 transition shadow-lg shadow-red-200 animate-pulse\">\r\n                <Lock size={16} /> Renew to Unlock\r\n              </Link>\r\n            ) : (\r\n              <a href={`/${store.slug}`} target=\"_blank\" className=\"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-xl text-sm font-bold hover:bg-gray-800 transition shadow-lg shadow-gray-200\">\r\n                <ExternalLink size={16} /> View Store\r\n              </a>\r\n            )}\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          {/* REVENUE CARD: Interactive & Subscription Based */}\r\n          <button \r\n            onClick={() => !isLocked && setIsAnalyticsOpen(true)}\r\n            className=\"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all text-left relative overflow-hidden group w-full\"\r\n          >\r\n             <div className={`flex flex-col h-full transition-all duration-500 ${isLocked ? 'blur-md grayscale opacity-50' : ''}`}>\r\n               <div className=\"flex items-center justify-between mb-2\">\r\n                 <div className=\"flex items-center gap-3\">\r\n                   <div className=\"p-2 bg-emerald-50 text-emerald-600 rounded-xl group-hover:scale-110 transition\"><TrendingUp size={20}/></div>\r\n                   <span className=\"text-xs md:text-sm font-bold text-gray-400 uppercase tracking-wider whitespace-nowrap\">Monthly Revenue</span>\r\n                 </div>\r\n                 {!isLocked && <BarChart3 size={16} className=\"text-emerald-400 opacity-40 md:opacity-0 md:group-hover:opacity-100 transition\" />}\r\n               </div>\r\n               <p className=\"text-2xl md:text-3xl font-black text-gray-900\">₦{stats.revenue.toLocaleString()}</p>\r\n               <div className=\"flex items-center gap-2 mt-2\">\r\n                  <span className=\"text-[10px] font-black text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded uppercase tracking-tighter flex items-center gap-1\">\r\n                    <Sparkles size={10} /> Subscription Cycle\r\n                  </span>\r\n                  <span className=\"text-[10px] font-bold text-gray-300 group-hover:text-emerald-500 transition\">View Details →</span>\r\n               </div>\r\n             </div>\r\n             {isLocked && (\r\n               <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-white/10 text-red-600 z-10\">\r\n                 <Lock size={20} className=\"mb-1\" />\r\n                 <span className=\"text-[10px] font-black uppercase tracking-widest\">Locked</span>\r\n               </div>\r\n             )}\r\n          </button>\r\n\r\n          <div className=\"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm hover:shadow-md transition\">\r\n             <div className=\"flex items-center gap-3 mb-2\">\r\n               <div className=\"p-2 bg-blue-50 text-blue-600 rounded-xl\"><Package size={20}/></div>\r\n               <span className=\"text-xs md:text-sm font-bold text-gray-400 uppercase tracking-wider whitespace-nowrap\">Products</span>\r\n             </div>\r\n             <div className=\"flex items-baseline gap-2\">\r\n               <p className=\"text-2xl md:text-3xl font-black text-gray-900\">{stats.productCount}</p>\r\n               {isFree && <span className=\"text-xs font-bold text-gray-400\">/ 5 Limit</span>}\r\n             </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white p-6 rounded-3xl border border-gray-100 shadow-sm hover:shadow-md transition relative overflow-hidden group\">\r\n             <div className={`flex flex-col h-full transition-all duration-500 ${isLocked ? 'blur-md grayscale opacity-50' : ''}`}>\r\n               <div className=\"flex items-center gap-3 mb-2\">\r\n                 <div className=\"p-2 bg-purple-50 text-purple-600 rounded-xl\"><Eye size={20}/></div>\r\n                 <span className=\"text-xs md:text-sm font-bold text-gray-400 uppercase tracking-wider whitespace-nowrap\">Empire Views</span>\r\n               </div>\r\n               <p className=\"text-2xl md:text-3xl font-black text-gray-900\">{stats.views.toLocaleString()}</p>\r\n             </div>\r\n             {isLocked && (\r\n               <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-white/10 text-red-600 z-10\">\r\n                 <Lock size={20} className=\"mb-1\" />\r\n                 <span className=\"text-[10px] font-black uppercase tracking-widest\">Locked</span>\r\n               </div>\r\n             )}\r\n          </div>\r\n        </div>\r\n\r\n        <ShareStore slug={store.slug} />\r\n\r\n        {isAnalyticsOpen && (\r\n          <div className=\"fixed inset-0 z-[100] bg-gray-900/60 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-white w-full max-w-4xl h-[90vh] md:h-auto md:rounded-[40px] rounded-t-[40px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom-10 md:zoom-in-95 duration-300 flex flex-col\">\r\n              <div className=\"p-6 md:p-8 border-b border-gray-100 flex justify-between items-center bg-white sticky top-0 z-10\">\r\n                <div className=\"flex items-center gap-3 md:gap-4\">\r\n                  <div className=\"p-2 md:p-3 bg-emerald-600 text-white rounded-xl md:rounded-2xl shadow-lg\">\r\n                    <TrendingUp size={24}/>\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-lg md:text-2xl font-black text-gray-900 tracking-tight\">Financial Empire Overview</h2>\r\n                    <p className=\"text-[10px] md:text-sm text-gray-500\">Monthly subscription cycle analytics</p>\r\n                  </div>\r\n                </div>\r\n                <button onClick={() => setIsAnalyticsOpen(false)} className=\"p-2 hover:bg-gray-100 rounded-full transition text-gray-400\"><X /></button>\r\n              </div>\r\n\r\n              <div className=\"p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 overflow-y-auto flex-1\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between uppercase tracking-widest text-[9px] md:text-[10px] font-black text-gray-400\">\r\n                    <span>Monthly Revenue (30d)</span>\r\n                    <span className=\"text-emerald-600\">Active Cycle</span>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 md:p-6 rounded-[24px] md:rounded-[32px] border border-gray-100 h-40 md:h-48 flex items-end justify-between gap-1 px-4 md:px-8\">\r\n                    {[30, 60, 40, 80, 55, 95, 70, 45, 100, 85, 60, 90].map((h, i) => (\r\n                      <div key={i} style={{ height: `${h}%` }} className=\"flex-1 bg-emerald-500 rounded-full opacity-80\" />\r\n                    ))}\r\n                  </div>\r\n                  <p className=\"text-[11px] font-bold text-gray-500 text-center uppercase tracking-tighter\">Your daily revenue flow this month</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between uppercase tracking-widest text-[9px] md:text-[10px] font-black text-gray-400\">\r\n                    <span>Yearly Revenue (2025)</span>\r\n\r\n                    <p className=\"text-[11px] font-bold text-gray-500 text-center uppercase tracking-tighter\">\r\n                      Total Empire Revenue this year: <span className=\"text-purple-600\">₦{stats.revenue.toLocaleString()}</span>\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 md:p-6 rounded-[24px] md:rounded-[32px] border border-gray-100 h-40 md:h-48 flex items-end justify-between gap-1.5 px-4 md:px-8\">\r\n                    {[20, 35, 30, 50, 65, 80].map((h, i) => (\r\n                      <div key={i} style={{ height: `${h}%` }} className=\"flex-1 bg-gray-900 rounded-t-lg opacity-20\" />\r\n                    ))}\r\n                    <div style={{ height: '90%' }} className=\"flex-1 bg-purple-600 rounded-t-lg shadow-lg\" />\r\n                    {[40, 40, 40, 40, 40].map((h, i) => (\r\n                      <div key={i} style={{ height: `${h}%` }} className=\"flex-1 border-t-2 border-dashed border-gray-200\" />\r\n                    ))}\r\n                  </div>\r\n                  <p className=\"text-[11px] font-bold text-gray-500 text-center uppercase tracking-tighter\">Projected expansion of your business</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"p-6 md:p-8 bg-gray-50/50 flex flex-col md:flex-row gap-4 justify-between items-center border-t border-gray-100\">\r\n                 <div className=\"flex gap-6 w-full md:w-auto justify-around md:justify-start\">\r\n                   <div>\r\n                       <p className=\"text-[9px] md:text-[10px] font-black text-gray-400 uppercase\">Avg Order</p>\r\n                       <p className=\"font-bold text-gray-900\">₦{(stats.revenue / (initialOrders.length || 1)).toLocaleString()}</p>\r\n                   </div>\r\n                   <div className=\"border-x border-gray-200 px-6\">\r\n                       <p className=\"font-bold text-gray-900\">\r\n                         ₦{initialOrders.length > 0 \r\n                         ? (stats.revenue / initialOrders.length).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) \r\n                         : \"0.00\"}\r\n                       </p>\r\n                       <p className=\"font-bold text-gray-900\">{initialOrders.length}</p>\r\n                   </div>\r\n                 </div>\r\n                 <button onClick={() => setIsAnalyticsOpen(false)} className=\"w-full md:w-auto px-8 py-3 bg-gray-900 text-white rounded-2xl font-bold text-sm shadow-xl\">Close Report</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {isLocked && (\r\n          <div className=\"bg-red-50 border border-red-100 p-4 rounded-xl flex flex-col md:flex-row items-start md:items-center justify-between gap-3 border-l-4 border-l-red-600\">\r\n             <div className=\"flex items-center gap-3\">\r\n               <AlertTriangle className=\"text-red-500 shrink-0\" />\r\n               <div className=\"text-sm\">\r\n                 <span className=\"font-bold text-red-900\">Subscription Expired.</span> Your business is currently paused and invisible to customers.\r\n               </div>\r\n             </div>\r\n             <Link href=\"/dashboard/subscription\" className=\"w-full md:w-auto px-6 py-2 bg-red-600 text-white text-xs font-black rounded-lg hover:bg-red-700 text-center uppercase tracking-wider\">Unlock My Store</Link>\r\n          </div>\r\n        )}\r\n\r\n        {isFreeLimitReached && !isLocked && (\r\n          <div className=\"bg-amber-50 border border-amber-100 p-4 rounded-xl flex flex-col md:flex-row items-start md:items-center justify-between gap-3\">\r\n             <div className=\"flex items-center gap-3\">\r\n               <Crown className=\"text-amber-600 shrink-0\" />\r\n               <div className=\"text-sm\">\r\n                 <span className=\"font-bold text-amber-900\">Limit Reached.</span> You've hit the 5-product limit.\r\n               </div>\r\n             </div>\r\n             <Link href=\"/dashboard/subscription\" className=\"px-4 py-2 bg-amber-500 text-white text-xs font-bold rounded-lg hover:bg-amber-600 w-full md:w-auto text-center\">Upgrade Plan</Link>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex gap-2 overflow-x-auto pb-2 border-b border-gray-100 no-scrollbar\">\r\n           {['products', 'orders', 'settings'].map((tab) => (\r\n             <button\r\n               key={tab}\r\n               onClick={() => setActiveTab(tab)}\r\n               className={`px-4 py-2 rounded-xl text-sm font-bold capitalize transition-all whitespace-nowrap ${\r\n                 activeTab === tab \r\n                   ? 'bg-gray-900 text-white shadow-lg' \r\n                   : 'text-gray-500 hover:bg-gray-100'\r\n               }`}\r\n             >\r\n               {tab}\r\n             </button>\r\n           ))}\r\n        </div>\r\n\r\n        {activeTab === \"products\" && (\r\n          <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\r\n              <h3 className=\"font-bold text-lg text-gray-900\">Inventory</h3>\r\n              <div className=\"flex gap-2 w-full md:w-auto\">\r\n                 <button onClick={() => setIsCatModalOpen(true)} className=\"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-xl text-sm font-bold hover:bg-gray-50 transition\">\r\n                    <Tags size={16}/> <span className=\"md:inline\">Categories</span>\r\n                 </button>\r\n                 <button onClick={() => setIsAddModalOpen(true)} className=\"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-emerald-500 transition\">\r\n                    <Plus size={16}/> <span className=\"md:inline\">Add Product</span>\r\n                 </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white border border-gray-100 rounded-3xl overflow-hidden shadow-sm overflow-x-auto\">\r\n               {initialProducts.length === 0 ? (\r\n                 <div className=\"p-12 text-center text-gray-400\">\r\n                   <Package size={48} className=\"mx-auto mb-4 opacity-20\"/>\r\n                   <p>No products yet. Add your first one!</p>\r\n                 </div>\r\n               ) : (\r\n                 <table className=\"w-full text-left min-w-[600px]\">\r\n                   <thead className=\"bg-gray-50/50 border-b border-gray-100 text-[10px] uppercase text-gray-500\">\r\n                     <tr>\r\n                       <th className=\"px-6 py-4 font-bold\">Product</th>\r\n                       <th className=\"px-6 py-4 font-bold\">Category</th>\r\n                       <th className=\"px-6 py-4 font-bold\">Price</th>\r\n                       <th className=\"px-6 py-4 font-bold\">Stock</th>\r\n                       <th className=\"px-6 py-4 font-bold text-right\">Actions</th>\r\n                     </tr>\r\n                   </thead>\r\n                   <tbody className=\"divide-y divide-gray-100\">\r\n                     {initialProducts.map((p) => (\r\n                       <tr key={p.id} className=\"hover:bg-gray-50/80 transition\">\r\n                         <td className=\"px-6 py-4 font-bold text-gray-900 truncate max-w-[150px] md:max-w-[200px] text-sm md:text-base\">{p.name}</td>\r\n                         <td className=\"px-6 py-4 text-gray-500 text-xs md:text-sm\">\r\n                           <span className=\"px-2 py-1 bg-gray-100 rounded-lg font-bold\">{p.categories?.name || 'Uncategorized'}</span>\r\n                         </td>\r\n                         <td className=\"px-6 py-4 text-emerald-600 font-bold text-xs md:text-sm whitespace-nowrap\">₦{p.price.toLocaleString()}</td>\r\n                         <td className=\"px-6 py-4 text-xs md:text-sm\">\r\n                           {p.stock_quantity === 0 \r\n                             ? <span className=\"text-red-500 font-bold bg-red-50 px-2 py-1 rounded-lg\">Sold Out</span> \r\n                             : <span className=\"text-gray-600 font-bold\">{p.stock_quantity}</span>\r\n                           }\r\n                         </td>\r\n                         <td className=\"px-6 py-4 text-right flex justify-end gap-1 md:gap-2\">\r\n                            <button onClick={() => openEditModal(p)} className=\"p-2 text-gray-400 hover:text-blue-600 transition\"><Edit size={16}/></button>\r\n                            <button onClick={() => deleteProduct(p.id)} className=\"p-2 text-gray-400 hover:text-red-600 transition\"><Trash2 size={16}/></button>\r\n                         </td>\r\n                       </tr>\r\n                     ))}\r\n                   </tbody>\r\n                 </table>\r\n               )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"orders\" && (\r\n          <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n            <h3 className=\"font-bold text-lg text-gray-900 mb-6\">Recent Orders</h3>\r\n            <div className=\"bg-white border border-gray-100 rounded-3xl overflow-hidden shadow-sm overflow-x-auto\">\r\n              {initialOrders.length === 0 ? (\r\n                 <div className=\"p-12 text-center text-gray-400\">\r\n                   <ShoppingBag size={48} className=\"mx-auto mb-4 opacity-20\"/>\r\n                   <p>No orders yet. Share your store link!</p>\r\n                 </div>\r\n              ) : (\r\n                 <table className=\"w-full text-left min-w-[600px]\">\r\n                   <thead className=\"bg-gray-50/50 border-b border-gray-100 text-[10px] uppercase text-gray-500\">\r\n                     <tr>\r\n                       <th className=\"px-6 py-4 font-bold\">Customer</th>\r\n                       <th className=\"px-6 py-4 font-bold\">Total</th>\r\n                       <th className=\"px-6 py-4 font-bold\">Status</th>\r\n                       <th className=\"px-6 py-4 font-bold text-right\">Action</th>\r\n                     </tr>\r\n                   </thead>\r\n                   <tbody className=\"divide-y divide-gray-100\">\r\n                     {initialOrders.map((order) => (\r\n                       <tr key={order.id} className=\"hover:bg-gray-50/80 transition cursor-pointer\" onClick={() => setSelectedOrder(order)}>\r\n                         <td className=\"px-6 py-4\">\r\n                           <div className=\"font-bold text-gray-900 text-sm\">{order.customer_name}</div>\r\n                           <div className=\"text-[10px] text-gray-400\">{new Date(order.created_at).toLocaleDateString()}</div>\r\n                         </td>\r\n                         <td className=\"px-6 py-4 text-emerald-600 font-bold text-sm whitespace-nowrap\">₦{order.total_amount.toLocaleString()}</td>\r\n                         <td className=\"px-6 py-4 text-sm\">\r\n                            <span className={`px-2 py-1 rounded-lg text-[10px] font-bold uppercase ${\r\n                              order.status === 'paid' ? 'bg-emerald-100 text-emerald-700' :\r\n                              order.status === 'pending' ? 'bg-amber-100 text-amber-700' :\r\n                              'bg-gray-100 text-gray-600'\r\n                            }`}>\r\n                              {order.status}\r\n                            </span>\r\n                         </td>\r\n                         <td className=\"px-6 py-4 text-right whitespace-nowrap\">\r\n                           <button className=\"text-[10px] font-bold text-gray-500 border border-gray-200 px-3 py-1.5 rounded-lg\">Details</button>\r\n                         </td>\r\n                       </tr>\r\n                     ))}\r\n                   </tbody>\r\n                 </table>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === \"settings\" && (\r\n           <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n              <StoreSettings store={store} onUpdate={() => router.refresh()} />\r\n           </div>\r\n        )}\r\n\r\n      <AddProductModal storeId={store.id} isOpen={isAddModalOpen} onClose={closeProductModal} onSuccess={() => router.refresh()} productToEdit={productToEdit} />\r\n      <CategoryManager storeId={store.id} isOpen={isCatModalOpen} onClose={() => setIsCatModalOpen(false)} onSuccess={() => router.refresh()} />\r\n      <OrderDetailsModal order={selectedOrder} storeName={store.name} isOpen={!!selectedOrder} onClose={() => setSelectedOrder(null)} onUpdate={() => router.refresh()} />\r\n\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4001, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport DashboardClient from \"@/components/dashboard/DashboardClient\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  const [store, setStore] = useState<any>(null);\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [stats, setStats] = useState({ revenue: 0, productCount: 0, views: 0 });\r\n  const [isLocked, setIsLocked] = useState(false); \r\n\r\n  const loadDashboardData = useCallback(async () => {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      \r\n      if (!user) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      const { data: storeData } = await supabase\r\n        .from(\"stores\")\r\n        .select(\"*\")\r\n        .eq(\"owner_id\", user.id) \r\n        .single();\r\n\r\n      if (!storeData) {\r\n        router.push(\"/onboarding\");\r\n        return;\r\n      }\r\n\r\n      setStore(storeData);\r\n\r\n      if (storeData.subscription_expiry) {\r\n        const expiry = new Date(storeData.subscription_expiry);\r\n        const now = new Date();\r\n        setIsLocked(expiry < now);\r\n      }\r\n\r\n      const { data: productsData } = await supabase\r\n        .from(\"products\")\r\n        .select(\"*, categories(name)\")\r\n        .eq(\"store_id\", storeData.id)\r\n        .order(\"created_at\", { ascending: false });\r\n      \r\n      setProducts(productsData || []);\r\n\r\n      const { data: ordersData } = await supabase\r\n        .from(\"orders\")\r\n        .select(\"*\")\r\n        .eq(\"store_id\", storeData.id)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      setOrders(ordersData || []);\r\n\r\n      const revenue = ordersData?.reduce((acc, order) => {\r\n            return acc + (['completed', 'paid'].includes(order.status) ? order.total_amount : 0);\r\n      }, 0) || 0;\r\n\r\n      const count = productsData?.length || 0;\r\n      \r\n      // Set Stats\r\n      setStats({ \r\n        revenue, \r\n        productCount: count, \r\n        views: storeData.view_count || 0 \r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Dashboard Load Error:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router]);\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n\r\n    const channel = supabase\r\n      .channel('dashboard-updates')\r\n      .on(\r\n        'postgres_changes',\r\n        { event: '*', schema: 'public', table: 'orders' },\r\n        (payload) => {\r\n          console.log('Order update!', payload);\r\n          loadDashboardData(); \r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        { event: '*', schema: 'public', table: 'stores' },\r\n        (payload) => {\r\n          console.log('View count update!', payload);\r\n          loadDashboardData();\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n\r\n  }, [loadDashboardData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!store) return null;\r\n\r\n  return (\r\n    <DashboardClient \r\n      store={store} \r\n      initialProducts={products} \r\n      initialOrders={orders}\r\n      stats={stats}\r\n      isLocked={isLocked} \r\n    />\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}