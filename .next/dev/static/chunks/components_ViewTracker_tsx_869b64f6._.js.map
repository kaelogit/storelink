{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/ViewTracker.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default function ViewTracker({ storeId }: { storeId: string }) {\r\n  const hasCounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const sessionKey = `viewed_store_${storeId}`;\r\n    if (sessionStorage.getItem(sessionKey) || hasCounted.current) {\r\n      return; \r\n    }\r\n\r\n    const countView = async () => {\r\n      try {\r\n        hasCounted.current = true;\r\n        sessionStorage.setItem(sessionKey, \"true\");\r\n\r\n        await supabase.rpc('increment_store_view', { store_uuid: storeId });\r\n      } catch (error) {\r\n        console.error(error); \r\n      }\r\n    };\r\n\r\n    countView();\r\n  }, [storeId]);\r\n\r\n  return null; \r\n}"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAKe,SAAS,YAAY,EAAE,OAAO,EAAuB;;IAClE,MAAM,aAAa,IAAA,uKAAM,EAAC;IAE1B,IAAA,0KAAS;iCAAC;YACR,MAAM,aAAa,CAAC,aAAa,EAAE,SAAS;YAC5C,IAAI,eAAe,OAAO,CAAC,eAAe,WAAW,OAAO,EAAE;gBAC5D;YACF;YAEA,MAAM;mDAAY;oBAChB,IAAI;wBACF,WAAW,OAAO,GAAG;wBACrB,eAAe,OAAO,CAAC,YAAY;wBAEnC,MAAM,8HAAQ,CAAC,GAAG,CAAC,wBAAwB;4BAAE,YAAY;wBAAQ;oBACnE,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC;oBAChB;gBACF;;YAEA;QACF;gCAAG;QAAC;KAAQ;IAEZ,OAAO;AACT;GAxBwB;KAAA"}}]
}