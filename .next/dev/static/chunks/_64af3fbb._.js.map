{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/dashboard/DashboardClient.tsx"],"sourcesContent":["DashboardClient.tsx"],"names":[],"mappings":"AAAA,gBAAgB,GAAG"}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport DashboardClient from \"@/components/dashboard/DashboardClient\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Data State\r\n  const [store, setStore] = useState<any>(null);\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [stats, setStats] = useState({ revenue: 0, productCount: 0, views: 0 });\r\n\r\n  useEffect(() => {\r\n    const loadDashboardData = async () => {\r\n      try {\r\n        // 1. Check Auth (Client Side)\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        \r\n        if (!user) {\r\n          router.push(\"/login\");\r\n          return;\r\n        }\r\n\r\n        // 2. Fetch Store Details\r\n        const { data: storeData } = await supabase\r\n          .from(\"stores\")\r\n          .select(\"*\")\r\n          .eq(\"owner_id\", user.id)\r\n          .single();\r\n\r\n        // If no store found, go to onboarding\r\n        if (!storeData) {\r\n          router.push(\"/onboarding\");\r\n          return;\r\n        }\r\n\r\n        setStore(storeData);\r\n\r\n        // 3. Fetch Products\r\n        const { data: productsData } = await supabase\r\n          .from(\"products\")\r\n          .select(\"*, categories(name)\")\r\n          .eq(\"store_id\", storeData.id)\r\n          .order(\"created_at\", { ascending: false });\r\n        \r\n        setProducts(productsData || []);\r\n\r\n        // 4. Fetch Orders\r\n        const { data: ordersData } = await supabase\r\n          .from(\"orders\")\r\n          .select(\"*\")\r\n          .eq(\"store_id\", storeData.id)\r\n          .order(\"created_at\", { ascending: false });\r\n\r\n        setOrders(ordersData || []);\r\n\r\n        // 5. Calculate Stats\r\n        const revenue = ordersData?.reduce((acc, order) => acc + (order.status === 'completed' ? order.total_amount : 0), 0) || 0;\r\n        const count = productsData?.length || 0;\r\n        \r\n        setStats({ \r\n          revenue, \r\n          productCount: count, \r\n          views: storeData.view_count || 0 \r\n        });\r\n\r\n      } catch (error) {\r\n        console.error(\"Dashboard Load Error:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadDashboardData();\r\n  }, [router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If we have loaded but no store (should have redirected, but safety check)\r\n  if (!store) return null;\r\n\r\n  return (\r\n    <DashboardClient \r\n      store={store} \r\n      initialProducts={products} \r\n      initialOrders={orders}\r\n      stats={stats}\r\n    />\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,aAAa;IACb,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAM;IACxC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;QAAE,SAAS;QAAG,cAAc;QAAG,OAAO;IAAE;IAE3E,IAAA,0KAAS;mCAAC;YACR,MAAM;6DAAoB;oBACxB,IAAI;wBACF,8BAA8B;wBAC9B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;wBAEtD,IAAI,CAAC,MAAM;4BACT,OAAO,IAAI,CAAC;4BACZ;wBACF;wBAEA,yBAAyB;wBACzB,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,8HAAQ,CACvC,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,KAAK,EAAE,EACtB,MAAM;wBAET,sCAAsC;wBACtC,IAAI,CAAC,WAAW;4BACd,OAAO,IAAI,CAAC;4BACZ;wBACF;wBAEA,SAAS;wBAET,oBAAoB;wBACpB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,8HAAQ,CAC1C,IAAI,CAAC,YACL,MAAM,CAAC,uBACP,EAAE,CAAC,YAAY,UAAU,EAAE,EAC3B,KAAK,CAAC,cAAc;4BAAE,WAAW;wBAAM;wBAE1C,YAAY,gBAAgB,EAAE;wBAE9B,kBAAkB;wBAClB,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,8HAAQ,CACxC,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,UAAU,EAAE,EAC3B,KAAK,CAAC,cAAc;4BAAE,WAAW;wBAAM;wBAE1C,UAAU,cAAc,EAAE;wBAE1B,qBAAqB;wBACrB,MAAM,UAAU,YAAY;yEAAO,CAAC,KAAK,QAAU,MAAM,CAAC,MAAM,MAAM,KAAK,cAAc,MAAM,YAAY,GAAG,CAAC;wEAAG,MAAM;wBACxH,MAAM,QAAQ,cAAc,UAAU;wBAEtC,SAAS;4BACP;4BACA,cAAc;4BACd,OAAO,UAAU,UAAU,IAAI;wBACjC;oBAEF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,yBAAyB;oBACzC,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;kCAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,4EAA4E;IAC5E,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACE,6LAAC,yJAAe;QACd,OAAO;QACP,iBAAiB;QACjB,eAAe;QACf,OAAO;;;;;;AAGb;GA7FwB;;QACP,kJAAS;;;KADF"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}