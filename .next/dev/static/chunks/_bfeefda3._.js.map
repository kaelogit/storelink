{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/StoreHeader.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport { MapPin, BadgeCheck, Info } from \"lucide-react\"; \r\nimport { Store } from \"@/types\";\r\n\r\ninterface StoreHeaderProps {\r\n  store: Store;\r\n  onOpenInfo: () => void;\r\n}\r\n\r\nexport default function StoreHeader({ store, onOpenInfo }: StoreHeaderProps) {\r\n  return (\r\n    <div className=\"relative bg-white pb-6\">\r\n      \r\n      {/* 1. CINEMATIC HERO */}\r\n      <div className=\"h-40 md:h-56 w-full relative bg-gray-900 overflow-hidden\">\r\n        {store.cover_image_url ? (\r\n          <Image \r\n            src={store.cover_image_url} \r\n            alt=\"Cover\" \r\n            fill \r\n            className=\"object-cover opacity-90\"\r\n            priority // <--- FIXES LCP WARNING\r\n            sizes=\"100vw\" // <--- FIXES SIZES WARNING\r\n          />\r\n        ) : (\r\n          <div className=\"w-full h-full bg-gradient-to-r from-gray-800 to-gray-900\" />\r\n        )}\r\n        <div className=\"absolute inset-0 bg-black/20\" />\r\n      </div>\r\n      \r\n      {/* 2. PROFILE SECTION */}\r\n      <div className=\"max-w-6xl mx-auto px-4\">\r\n        <div className=\"flex flex-col md:flex-row items-start md:items-end -mt-12 relative z-10 gap-4\">\r\n          \r\n          {/* Logo */}\r\n          <div className=\"w-24 h-24 md:w-32 md:h-32 bg-white rounded-2xl p-1 shadow-xl flex-shrink-0\">\r\n            <div className=\"w-full h-full bg-gray-50 rounded-xl overflow-hidden relative border border-gray-100\">\r\n              {store.logo_url ? (\r\n                <Image src={store.logo_url} alt={store.name} fill className=\"object-cover\" sizes=\"(max-width: 768px) 96px, 128px\" />\r\n              ) : (\r\n                <div className=\"flex items-center justify-center h-full text-3xl font-bold text-gray-300\">\r\n                  {store.name.charAt(0)}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Name & Location */}\r\n          <div className=\"flex-1 w-full pt-2 md:pb-2\">\r\n             <div className=\"flex items-center justify-between\">\r\n               <div>\r\n                  <h1 className=\"text-2xl md:text-3xl font-extrabold text-gray-900 flex items-center gap-2\">\r\n                    {store.name}\r\n                    {store.subscription_plan === 'premium' && (\r\n                      <BadgeCheck className=\"text-blue-600 fill-blue-50 w-6 h-6\" />\r\n                    )}\r\n                  </h1>\r\n                  <p className=\"text-sm text-gray-500 font-medium flex items-center gap-1 mt-1\">\r\n                    <MapPin size={14}/> {store.location}\r\n                  </p>\r\n               </div>\r\n\r\n               {/* Desktop Info Button */}\r\n               <button \r\n                 onClick={onOpenInfo}\r\n                 className=\"hidden md:flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-900 px-5 py-2.5 rounded-xl text-sm font-bold transition\"\r\n               >\r\n                 <Info size={18} /> Store Info\r\n               </button>\r\n             </div>\r\n          </div>\r\n\r\n          {/* Mobile Info Button */}\r\n          <div className=\"w-full md:hidden mt-2\">\r\n            <button \r\n              onClick={onOpenInfo}\r\n              className=\"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-900 py-3 rounded-xl text-sm font-bold active:scale-95 transition\"\r\n            >\r\n              <Info size={18} /> About & Contact\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;;;;AAQe,SAAS,YAAY,EAAE,KAAK,EAAE,UAAU,EAAoB;IACzE,qBACE,6LAAC;QAAI,WAAU;;0BAGb,6LAAC;gBAAI,WAAU;;oBACZ,MAAM,eAAe,iBACpB,6LAAC,2IAAK;wBACJ,KAAK,MAAM,eAAe;wBAC1B,KAAI;wBACJ,IAAI;wBACJ,WAAU;wBACV,QAAQ;wBACR,OAAM;;;;;6CAGR,6LAAC;wBAAI,WAAU;;;;;;kCAEjB,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCAGb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;0CACZ,MAAM,QAAQ,iBACb,6LAAC,2IAAK;oCAAC,KAAK,MAAM,QAAQ;oCAAE,KAAK,MAAM,IAAI;oCAAE,IAAI;oCAAC,WAAU;oCAAe,OAAM;;;;;yDAEjF,6LAAC;oCAAI,WAAU;8CACZ,MAAM,IAAI,CAAC,MAAM,CAAC;;;;;;;;;;;;;;;;sCAO3B,6LAAC;4BAAI,WAAU;sCACZ,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACE,6LAAC;gDAAG,WAAU;;oDACX,MAAM,IAAI;oDACV,MAAM,iBAAiB,KAAK,2BAC3B,6LAAC,mOAAU;wDAAC,WAAU;;;;;;;;;;;;0DAG1B,6LAAC;gDAAE,WAAU;;kEACX,6LAAC,uNAAM;wDAAC,MAAM;;;;;;oDAAK;oDAAE,MAAM,QAAQ;;;;;;;;;;;;;kDAKxC,6LAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,6LAAC,6MAAI;gDAAC,MAAM;;;;;;4CAAM;;;;;;;;;;;;;;;;;;sCAMzB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,6LAAC,6MAAI;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhC;KA7EwB"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/CategoryFilter.tsx"],"sourcesContent":["\"use client\";\r\n\r\ninterface CategoryFilterProps {\r\n  categories: { id: string; name: string }[];\r\n  activeCategory: string;\r\n  onSelect: (id: string) => void;\r\n}\r\n\r\nexport default function CategoryFilter({ categories, activeCategory, onSelect }: CategoryFilterProps) {\r\n  return (\r\n    <div className=\"sticky top-0 z-30 bg-gray-50/95 backdrop-blur-md py-3 border-b border-gray-200\">\r\n      <div className=\"max-w-6xl mx-auto px-4 flex gap-2 overflow-x-auto scrollbar-hide\">\r\n        <button \r\n          onClick={() => onSelect(\"all\")}\r\n          className={`px-5 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all active:scale-95 ${\r\n            activeCategory === \"all\" \r\n              ? \"bg-gray-900 text-white shadow-md ring-2 ring-gray-900 ring-offset-1\" \r\n              : \"bg-white text-gray-600 border border-gray-200 hover:bg-gray-100\"\r\n          }`}\r\n        >\r\n          All Items\r\n        </button>\r\n        \r\n        {categories.map((cat) => (\r\n          <button \r\n            key={cat.id}\r\n            onClick={() => onSelect(cat.id)}\r\n            className={`px-5 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all active:scale-95 ${\r\n              activeCategory === cat.id \r\n                ? \"bg-gray-900 text-white shadow-md ring-2 ring-gray-900 ring-offset-1\" \r\n                : \"bg-white text-gray-600 border border-gray-200 hover:bg-gray-100\"\r\n            }`}\r\n          >\r\n            {cat.name}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,eAAe,EAAE,UAAU,EAAE,cAAc,EAAE,QAAQ,EAAuB;IAClG,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,SAAS,IAAM,SAAS;oBACxB,WAAW,CAAC,0FAA0F,EACpG,mBAAmB,QACf,wEACA,mEACJ;8BACH;;;;;;gBAIA,WAAW,GAAG,CAAC,CAAC,oBACf,6LAAC;wBAEC,SAAS,IAAM,SAAS,IAAI,EAAE;wBAC9B,WAAW,CAAC,0FAA0F,EACpG,mBAAmB,IAAI,EAAE,GACrB,wEACA,mEACJ;kCAED,IAAI,IAAI;uBARJ,IAAI,EAAE;;;;;;;;;;;;;;;;AAcvB;KA/BwB"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/ProductGrid.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\nimport { ShoppingBag, Plus } from \"lucide-react\";\r\nimport { Product } from \"@/types\";\r\n\r\ninterface ProductGridProps {\r\n  products: Product[];\r\n  onProductClick: (product: Product) => void;\r\n  onAddToCart: (product: Product, e: any) => void;\r\n}\r\n\r\nexport default function ProductGrid({ products, onProductClick, onAddToCart }: ProductGridProps) {\r\n  if (products.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-20 text-gray-400\">\r\n         <p>No items found in this category.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 px-4\">\r\n      {products.map((product) => (\r\n        <div \r\n          key={product.id} \r\n          onClick={() => onProductClick(product)}\r\n          className=\"bg-white p-2 rounded-2xl shadow-sm border border-gray-100 active:scale-95 transition cursor-pointer hover:shadow-md relative group\"\r\n        >\r\n          <div className=\"aspect-square bg-gray-100 rounded-xl mb-3 relative overflow-hidden\">\r\n             {product.image_urls && product.image_urls.length > 0 ? (\r\n               <Image src={product.image_urls[0]} alt={product.name} fill className=\"object-cover\" />\r\n             ) : (\r\n               <div className=\"w-full h-full flex items-center justify-center text-gray-300\">\r\n                  <ShoppingBag className=\"opacity-20\" />\r\n               </div>\r\n             )}\r\n             \r\n             {/* Quick Add Button */}\r\n             <button \r\n               onClick={(e) => onAddToCart(product, e)}\r\n               className=\"absolute bottom-2 right-2 bg-white text-gray-900 p-2 rounded-full shadow-lg hover:bg-emerald-50 active:scale-90 transition z-10 opacity-100 md:opacity-0 md:group-hover:opacity-100\"\r\n             >\r\n               <Plus size={16} strokeWidth={3} />\r\n             </button>\r\n          </div>\r\n          <div className=\"px-1 mb-2\">\r\n             <h3 className=\"font-semibold text-gray-900 text-sm truncate\">{product.name}</h3>\r\n             <div className=\"flex justify-between items-center mt-1\">\r\n                <p className=\"text-emerald-700 font-bold text-sm\">â‚¦{product.price.toLocaleString()}</p>\r\n                {product.stock_quantity < 1 && <span className=\"text-[10px] text-red-500 font-bold\">Sold Out</span>}\r\n             </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAFA;;;;AAWe,SAAS,YAAY,EAAE,QAAQ,EAAE,cAAc,EAAE,WAAW,EAAoB;IAC7F,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,6LAAC;YAAI,WAAU;sBACZ,cAAA,6LAAC;0BAAE;;;;;;;;;;;IAGV;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,wBACb,6LAAC;gBAEC,SAAS,IAAM,eAAe;gBAC9B,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;4BACX,QAAQ,UAAU,IAAI,QAAQ,UAAU,CAAC,MAAM,GAAG,kBACjD,6LAAC,2IAAK;gCAAC,KAAK,QAAQ,UAAU,CAAC,EAAE;gCAAE,KAAK,QAAQ,IAAI;gCAAE,IAAI;gCAAC,WAAU;;;;;qDAErE,6LAAC;gCAAI,WAAU;0CACZ,cAAA,6LAAC,sOAAW;oCAAC,WAAU;;;;;;;;;;;0CAK5B,6LAAC;gCACC,SAAS,CAAC,IAAM,YAAY,SAAS;gCACrC,WAAU;0CAEV,cAAA,6LAAC,6MAAI;oCAAC,MAAM;oCAAI,aAAa;;;;;;;;;;;;;;;;;kCAGlC,6LAAC;wBAAI,WAAU;;0CACZ,6LAAC;gCAAG,WAAU;0CAAgD,QAAQ,IAAI;;;;;;0CAC1E,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAE,WAAU;;4CAAqC;4CAAE,QAAQ,KAAK,CAAC,cAAc;;;;;;;oCAC/E,QAAQ,cAAc,GAAG,mBAAK,6LAAC;wCAAK,WAAU;kDAAqC;;;;;;;;;;;;;;;;;;;eAzBrF,QAAQ,EAAE;;;;;;;;;;AAgCzB;KA7CwB"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/StoreInfoModal.tsx"],"sourcesContent":["\"use client\";\r\nimport { X, MapPin, Globe, MessageCircle, Clock, CheckCircle } from \"lucide-react\";\r\nimport { Store } from \"@/types\";\r\nimport Image from \"next/image\";\r\n\r\ninterface StoreInfoModalProps {\r\n  store: Store;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  productCount: number;\r\n}\r\n\r\nexport default function StoreInfoModal({ store, isOpen, onClose, productCount }: StoreInfoModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-sm rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"bg-gray-50 p-4 flex justify-between items-center border-b border-gray-100\">\r\n           <span className=\"font-bold text-gray-900\">Store Profile</span>\r\n           <button onClick={onClose} className=\"bg-white p-2 rounded-full shadow-sm text-gray-500 hover:bg-gray-100\"><X size={20}/></button>\r\n        </div>\r\n\r\n        <div className=\"p-6 overflow-y-auto\">\r\n           {/* Logo Centered */}\r\n           <div className=\"flex flex-col items-center text-center mb-6\">\r\n              <div className=\"w-24 h-24 rounded-full border-4 border-gray-50 bg-white shadow-sm relative overflow-hidden mb-3\">\r\n                 {store.logo_url ? <Image src={store.logo_url} alt=\"\" fill className=\"object-cover\" /> : <div className=\"w-full h-full bg-gray-200\" />}\r\n              </div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">{store.name}</h2>\r\n              <p className=\"text-gray-500 text-sm mt-1 flex items-center gap-1\">\r\n                <MapPin size={14} /> {store.location}\r\n              </p>\r\n           </div>\r\n\r\n           {/* Stats */}\r\n           <div className=\"grid grid-cols-2 gap-4 mb-8\">\r\n              <div className=\"bg-gray-50 p-4 rounded-2xl text-center\">\r\n                 <p className=\"text-2xl font-bold text-gray-900\">{productCount}</p>\r\n                 <p className=\"text-xs text-gray-400 font-bold uppercase\">Products</p>\r\n              </div>\r\n              <div className=\"bg-green-50 p-4 rounded-2xl text-center\">\r\n                 <CheckCircle className=\"w-6 h-6 text-green-600 mx-auto mb-1\" />\r\n                 <p className=\"text-xs text-green-700 font-bold uppercase\">Verified</p>\r\n              </div>\r\n           </div>\r\n\r\n           {/* About */}\r\n           <div className=\"mb-8\">\r\n             <h3 className=\"text-sm font-bold text-gray-900 uppercase mb-2\">About Us</h3>\r\n             <p className=\"text-gray-600 text-sm leading-relaxed whitespace-pre-line\">\r\n               {store.description || \"No description provided.\"}\r\n             </p>\r\n           </div>\r\n\r\n           {/* Contact Buttons (THE IMPORTANT PART) */}\r\n           <div className=\"space-y-3\">\r\n              <h3 className=\"text-sm font-bold text-gray-900 uppercase mb-1\">Contact & Socials</h3>\r\n              \r\n              {/* WhatsApp (Primary) */}\r\n              <a href={`https://wa.me/${store.whatsapp_number}`} target=\"_blank\" className=\"flex items-center justify-center gap-3 w-full p-4 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 active:scale-95 transition\">\r\n                 <MessageCircle size={20} /> Chat on WhatsApp\r\n               </a>\r\n\r\n             {store.instagram_url && (\r\n               <a href={store.instagram_url} target=\"_blank\" className=\"flex items-center justify-center gap-3 w-full p-4 bg-pink-50 text-pink-700 rounded-xl text-sm font-bold hover:bg-pink-100 transition\">\r\n                 <Globe size={20} /> Instagram Page\r\n               </a>\r\n             )}\r\n             \r\n             {store.tiktok_url && (\r\n               <a href={store.tiktok_url} target=\"_blank\" className=\"flex items-center justify-center gap-3 w-full p-4 bg-gray-100 text-gray-900 rounded-xl text-sm font-bold hover:bg-gray-200 transition\">\r\n                 <Globe size={20} /> TikTok Page\r\n               </a>\r\n             )}\r\n           </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAHA;;;;AAYe,SAAS,eAAe,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAuB;IAClG,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAGb,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC;4BAAK,WAAU;sCAA0B;;;;;;sCAC1C,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAsE,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAGtH,6LAAC;oBAAI,WAAU;;sCAEZ,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAI,WAAU;8CACX,MAAM,QAAQ,iBAAG,6LAAC,2IAAK;wCAAC,KAAK,MAAM,QAAQ;wCAAE,KAAI;wCAAG,IAAI;wCAAC,WAAU;;;;;6DAAoB,6LAAC;wCAAI,WAAU;;;;;;;;;;;8CAE1G,6LAAC;oCAAG,WAAU;8CAAoC,MAAM,IAAI;;;;;;8CAC5D,6LAAC;oCAAE,WAAU;;sDACX,6LAAC,uNAAM;4CAAC,MAAM;;;;;;wCAAM;wCAAE,MAAM,QAAQ;;;;;;;;;;;;;sCAKzC,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAE,WAAU;sDAAoC;;;;;;sDACjD,6LAAC;4CAAE,WAAU;sDAA4C;;;;;;;;;;;;8CAE5D,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC,6OAAW;4CAAC,WAAU;;;;;;sDACvB,6LAAC;4CAAE,WAAU;sDAA6C;;;;;;;;;;;;;;;;;;sCAKhE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAiD;;;;;;8CAC/D,6LAAC;oCAAE,WAAU;8CACV,MAAM,WAAW,IAAI;;;;;;;;;;;;sCAK1B,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAG,WAAU;8CAAiD;;;;;;8CAG/D,6LAAC;oCAAE,MAAM,CAAC,cAAc,EAAE,MAAM,eAAe,EAAE;oCAAE,QAAO;oCAAS,WAAU;;sDAC1E,6LAAC,4OAAa;4CAAC,MAAM;;;;;;wCAAM;;;;;;;gCAG9B,MAAM,aAAa,kBAClB,6LAAC;oCAAE,MAAM,MAAM,aAAa;oCAAE,QAAO;oCAAS,WAAU;;sDACtD,6LAAC,gNAAK;4CAAC,MAAM;;;;;;wCAAM;;;;;;;gCAItB,MAAM,UAAU,kBACf,6LAAC;oCAAE,MAAM,MAAM,UAAU;oCAAE,QAAO;oCAAS,WAAU;;sDACnD,6LAAC,gNAAK;4CAAC,MAAM;;;;;;wCAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpC;KAtEwB"}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey)"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,0LAAY,EAAC,aAAa"}},
    {"offset": {"line": 741, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/store/CheckoutModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { X, Trash2, MessageCircle, Loader2 } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\"; // Import Supabase to save data\r\nimport { Store, Product } from \"@/types\";\r\n\r\ninterface CheckoutModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  cart: { product: Product; qty: number }[];\r\n  store: Store;\r\n  onRemoveItem: (id: string) => void;\r\n}\r\n\r\nexport default function CheckoutModal({ isOpen, onClose, cart, store, onRemoveItem }: CheckoutModalProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [customer, setCustomer] = useState({ name: \"\", phone: \"\", address: \"\", email: \"\" });\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const cartTotal = cart.reduce((sum, item) => sum + item.product.price * item.qty, 0);\r\n\r\n  // Helper to make phone number WhatsApp friendly (e.g. 080123... -> 23480123...)\r\n  const formatPhoneNumber = (phone: string) => {\r\n    let clean = phone.replace(/\\D/g, ''); \r\n    if (clean.startsWith('0')) clean = clean.substring(1); \r\n    if (!clean.startsWith('234')) clean = '234' + clean;   \r\n    return clean;\r\n  };\r\n\r\n  const handleCheckout = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      // 1. SAVE ORDER TO SUPABASE (Status: Pending)\r\n      const { data: orderData, error: orderError } = await supabase\r\n        .from(\"orders\")\r\n        .insert({\r\n          store_id: store.id,\r\n          customer_name: customer.name,\r\n          customer_phone: customer.phone,\r\n          customer_email: customer.email,\r\n          customer_address: customer.address,\r\n          total_amount: cartTotal,\r\n          status: 'pending' // <--- Shows as yellow pending in dashboard\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (orderError) throw orderError;\r\n\r\n      // 2. SAVE ORDER ITEMS (So vendor knows what to pack)\r\n      const orderItems = cart.map(item => ({\r\n        order_id: orderData.id,\r\n        product_id: item.product.id,\r\n        product_name: item.product.name, // Save name in case product is deleted later\r\n        quantity: item.qty,\r\n        price: item.product.price\r\n      }));\r\n\r\n      const { error: itemsError } = await supabase.from(\"order_items\").insert(orderItems);\r\n      if (itemsError) throw itemsError;\r\n\r\n      // 3. GENERATE WHATSAPP MESSAGE\r\n      const itemsList = cart\r\n        .map((item) => `- ${item.qty}x ${item.product.name} (â‚¦${(item.product.price * item.qty).toLocaleString()})`)\r\n        .join(\"\\n\");\r\n\r\n      const finalPhone = formatPhoneNumber(customer.phone);\r\n      const vendorNumber = formatPhoneNumber(store.whatsapp_number);\r\n      \r\n      // We include the Order ID so the Vendor can find it in the dashboard\r\n      const message = `*New Order #${orderData.id.slice(0,8)}* ðŸ“¦\\n\\n${itemsList}\\n\\n*Total: â‚¦${cartTotal.toLocaleString()}*\\n\\n*Customer Details:*\\nName: ${customer.name}\\nPhone: ${finalPhone}\\nAddress: ${customer.address}\\n\\n(I have placed this order on your website)`;\r\n\r\n      // 4. REDIRECT TO WHATSAPP\r\n      const whatsappUrl = `https://wa.me/${vendorNumber}?text=${encodeURIComponent(message)}`;\r\n      window.open(whatsappUrl, \"_blank\");\r\n\r\n      // 5. Close Modal & Reset\r\n      onClose();\r\n      // Note: Ideally you should clear the cart here in the parent component\r\n\r\n    } catch (error: any) {\r\n      alert(\"Error processing order: \" + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in\">\r\n      <div className=\"bg-white w-full max-w-md rounded-3xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-10 flex flex-col max-h-[90vh]\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n          <h2 className=\"font-bold text-lg text-gray-900\">Checkout</h2>\r\n          <button onClick={onClose} className=\"p-2 bg-white rounded-full shadow-sm text-gray-500 hover:bg-gray-100\"><X size={20} /></button>\r\n        </div>\r\n\r\n        {/* Cart List */}\r\n        <div className=\"p-5 overflow-y-auto flex-1\">\r\n          {cart.map((item) => (\r\n            <div key={item.product.id} className=\"flex justify-between items-center mb-4\">\r\n              <div className=\"flex gap-3\">\r\n                <div className=\"h-12 w-12 bg-gray-100 rounded-lg relative overflow-hidden border border-gray-200\">\r\n                  {item.product.image_urls && item.product.image_urls[0] && (\r\n                    <Image src={item.product.image_urls[0]} alt=\"\" fill className=\"object-cover\" />\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-bold text-sm text-gray-900\">{item.product.name}</p>\r\n                  <p className=\"text-xs text-gray-500 font-medium\">{item.qty} x â‚¦{item.product.price.toLocaleString()}</p>\r\n                </div>\r\n              </div>\r\n              <button onClick={() => onRemoveItem(item.product.id)} className=\"text-red-400 p-2 hover:bg-red-50 rounded-lg transition\">\r\n                <Trash2 size={16} />\r\n              </button>\r\n            </div>\r\n          ))}\r\n          <div className=\"border-t border-gray-100 pt-4 mt-4 flex justify-between items-center\">\r\n            <span className=\"font-bold text-gray-900\">Total to Pay</span>\r\n            <span className=\"font-extrabold text-xl text-emerald-600\">â‚¦{cartTotal.toLocaleString()}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Customer Form */}\r\n        <div className=\"p-5 bg-gray-50 border-t border-gray-100\">\r\n          <form onSubmit={handleCheckout} className=\"space-y-3\">\r\n            <input required placeholder=\"Your Name\" className=\"w-full p-3 rounded-xl border border-gray-200 text-sm outline-none focus:ring-2 focus:ring-gray-900\" value={customer.name} onChange={e => setCustomer({...customer, name: e.target.value})}/>\r\n            <input required placeholder=\"Phone Number\" type=\"tel\" className=\"w-full p-3 rounded-xl border border-gray-200 text-sm outline-none focus:ring-2 focus:ring-gray-900\" value={customer.phone} onChange={e => setCustomer({...customer, phone: e.target.value})}/>\r\n            <input placeholder=\"Email (Optional)\" type=\"email\" className=\"w-full p-3 rounded-xl border border-gray-200 text-sm outline-none focus:ring-2 focus:ring-gray-900\" value={customer.email} onChange={e => setCustomer({...customer, email: e.target.value})}/>\r\n            <input required placeholder=\"Delivery Address\" className=\"w-full p-3 rounded-xl border border-gray-200 text-sm outline-none focus:ring-2 focus:ring-gray-900\" value={customer.address} onChange={e => setCustomer({...customer, address: e.target.value})}/>\r\n            \r\n            <button \r\n              type=\"submit\" disabled={cart.length === 0 || loading}\r\n              className=\"w-full bg-green-600 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-green-700 active:scale-95 transition mt-2 flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? <Loader2 className=\"animate-spin\" /> : <><MessageCircle size={20} /> Place Order on WhatsApp</>}\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1097, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Kaelo/store-link/components/StoreFront.tsx"],"sourcesContent":["\"use client\"; \r\n\r\nimport { useState, useRef } from \"react\";\r\nimport { Search, ShoppingBag, Truck, ShieldCheck } from \"lucide-react\";\r\nimport { Store, Product } from \"@/types\";\r\nimport Image from \"next/image\";\r\nimport { X } from \"lucide-react\";\r\n\r\n// --- IMPORTS ---\r\nimport StoreHeader from \"./store/StoreHeader\";\r\nimport CategoryFilter from \"./store/CategoryFilter\";\r\nimport ProductGrid from \"./store/ProductGrid\";\r\nimport StoreInfoModal from \"./store/StoreInfoModal\";\r\nimport CheckoutModal from \"./store/CheckoutModal\";\r\n\r\ntype Category = { id: string; name: string };\r\n\r\ninterface StoreFrontProps {\r\n  store: Store;\r\n  products: Product[];\r\n  categories: Category[];\r\n}\r\n\r\nexport default function StoreFront({ store, products, categories }: StoreFrontProps) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [activeCategory, setActiveCategory] = useState(\"all\");\r\n  const [cart, setCart] = useState<{ product: Product; qty: number }[]>([]);\r\n  \r\n  // Modals\r\n  const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);\r\n  const [isInfoOpen, setIsInfoOpen] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\r\n  const [activeImageIndex, setActiveImageIndex] = useState(0);\r\n\r\n  // --- FILTER ---\r\n  const filteredProducts = products.filter((p) => {\r\n    const matchesSearch = p.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesCategory = activeCategory === \"all\" ? true : (p as any).category_id === activeCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  // --- CART ---\r\n  const addToCart = (product: Product, e?: React.MouseEvent) => {\r\n    if (e) e.stopPropagation();\r\n    setCart((prev) => {\r\n      const existing = prev.find((item) => item.product.id === product.id);\r\n      if (existing) return prev.map((item) => item.product.id === product.id ? { ...item, qty: item.qty + 1 } : item);\r\n      return [...prev, { product, qty: 1 }];\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (id: string) => setCart(prev => prev.filter(item => item.product.id !== id));\r\n  const cartCount = cart.reduce((sum, item) => sum + item.qty, 0);\r\n  const cartTotal = cart.reduce((sum, item) => sum + item.product.price * item.qty, 0);\r\n\r\n  // --- HANDLE SCROLL FOR SWIPING ---\r\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\r\n    const scrollLeft = e.currentTarget.scrollLeft;\r\n    const width = e.currentTarget.offsetWidth;\r\n    const index = Math.round(scrollLeft / width);\r\n    setActiveImageIndex(index);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen font-sans pb-32\">\r\n      \r\n      {/* 1. HERO HEADER */}\r\n      <StoreHeader store={store} onOpenInfo={() => setIsInfoOpen(true)} />\r\n\r\n      {/* 2. TRUST BADGES */}\r\n      <div className=\"border-b border-gray-200 bg-white py-3\">\r\n         <div className=\"max-w-6xl mx-auto px-4 flex gap-6 overflow-x-auto scrollbar-hide text-xs font-medium text-gray-500 justify-center\">\r\n            <span className=\"flex items-center gap-1 whitespace-nowrap\"><Truck size={14} className=\"text-gray-900\"/> Fast Delivery</span>\r\n            <span className=\"flex items-center gap-1 whitespace-nowrap\"><ShieldCheck size={14} className=\"text-gray-900\"/> Verified Seller</span>\r\n         </div>\r\n      </div>\r\n\r\n      {/* 3. STICKY SEARCH */}\r\n      <div className=\"sticky top-0 z-20 bg-gray-50/95 backdrop-blur-sm pt-4 px-4 pb-2 border-b border-gray-200\">\r\n        <div className=\"max-w-6xl mx-auto flex gap-3\">\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-3 text-gray-400 w-5 h-5\" />\r\n            <input \r\n              type=\"text\" \r\n              placeholder=\"Search items...\"\r\n              className=\"w-full bg-white pl-10 pr-4 py-3 rounded-xl text-sm shadow-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-900 transition\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n            />\r\n          </div>\r\n          <button onClick={() => setIsCheckoutOpen(true)} className=\"bg-gray-900 text-white p-3 rounded-xl shadow-lg relative hover:bg-gray-800 transition\">\r\n            <ShoppingBag size={20} />\r\n            {cartCount > 0 && (\r\n              <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold h-5 w-5 flex items-center justify-center rounded-full border-2 border-white\">\r\n                {cartCount}\r\n              </span>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 4. CATEGORY RAIL */}\r\n      {categories.length > 0 && (\r\n        <div className=\"max-w-6xl mx-auto mt-6\">\r\n          <div className=\"px-4 mb-2 flex items-center justify-between\">\r\n            <h3 className=\"font-bold text-gray-900 text-sm uppercase tracking-wide\">Shop by Category</h3>\r\n          </div>\r\n          <CategoryFilter \r\n            categories={categories} \r\n            activeCategory={activeCategory} \r\n            onSelect={setActiveCategory} \r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* 5. PRODUCT GRID */}\r\n      <div className=\"max-w-6xl mx-auto mt-4\">\r\n        <ProductGrid \r\n          products={filteredProducts} \r\n          onProductClick={(p) => { setSelectedProduct(p); setActiveImageIndex(0); }} \r\n          onAddToCart={addToCart} \r\n        />\r\n      </div>\r\n\r\n      {/* 6. STICKY CART FOOTER */}\r\n      {cart.length > 0 && !isCheckoutOpen && (\r\n        <div className=\"fixed bottom-5 left-4 right-4 z-40\" onClick={() => setIsCheckoutOpen(true)}>\r\n           <div className=\"max-w-md mx-auto bg-gray-900 text-white p-4 rounded-2xl shadow-2xl flex justify-between items-center cursor-pointer animate-in slide-in-from-bottom-5\">\r\n             <div className=\"flex flex-col\">\r\n                <span className=\"text-xs text-gray-400\">{cartCount} Items</span>\r\n                <span className=\"font-bold text-lg\">â‚¦{cartTotal.toLocaleString()}</span>\r\n             </div>\r\n             <span className=\"bg-white text-gray-900 px-6 py-2 rounded-xl font-bold text-sm hover:bg-gray-100 transition\">\r\n               Checkout\r\n             </span>\r\n           </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* --- MODALS --- */}\r\n      <CheckoutModal isOpen={isCheckoutOpen} onClose={() => setIsCheckoutOpen(false)} cart={cart} store={store} onRemoveItem={removeFromCart} />\r\n      <StoreInfoModal isOpen={isInfoOpen} onClose={() => setIsInfoOpen(false)} store={store} productCount={products.length} />\r\n\r\n      {/* --- SWIPEABLE PRODUCT MODAL --- */}\r\n      {selectedProduct && (\r\n        <div className=\"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/70 backdrop-blur-sm p-0 md:p-4 animate-in fade-in\">\r\n          <div className=\"bg-white w-full md:max-w-4xl h-[92vh] md:h-[80vh] rounded-t-3xl md:rounded-3xl shadow-2xl flex flex-col md:flex-row relative overflow-hidden\">\r\n             \r\n             {/* Close Button */}\r\n             <button onClick={() => setSelectedProduct(null)} className=\"absolute top-4 right-4 z-30 bg-white/80 p-2 rounded-full shadow-sm backdrop-blur-md hover:bg-white transition\"><X size={20} /></button>\r\n             \r\n             {/* LEFT: SWIPEABLE IMAGE GALLERY */}\r\n             <div className=\"w-full md:w-1/2 bg-gray-100 relative h-64 md:h-full shrink-0 group\">\r\n               {/* Here is the magic: snap-x and snap-mandatory enables native swiping \r\n               */}\r\n               <div \r\n                 className=\"flex w-full h-full overflow-x-auto snap-x snap-mandatory scrollbar-hide\"\r\n                 onScroll={handleScroll}\r\n               >\r\n                 {selectedProduct.image_urls && selectedProduct.image_urls.length > 0 ? (\r\n                   selectedProduct.image_urls.map((url, idx) => (\r\n                     <div key={idx} className=\"w-full h-full flex-shrink-0 snap-center relative\">\r\n                       <Image src={url} alt=\"\" fill className=\"object-cover\" />\r\n                     </div>\r\n                   ))\r\n                 ) : (\r\n                   <div className=\"w-full h-full flex items-center justify-center text-gray-300\"><ShoppingBag size={40}/></div>\r\n                 )}\r\n               </div>\r\n\r\n               {/* Dots Indicator (Shows position) */}\r\n               {selectedProduct.image_urls && selectedProduct.image_urls.length > 1 && (\r\n                 <div className=\"absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-20 pointer-events-none\">\r\n                   {selectedProduct.image_urls.map((_, i) => (\r\n                     <div \r\n                       key={i} \r\n                       className={`h-1.5 rounded-full shadow-sm transition-all duration-300 ${i === activeImageIndex ? 'bg-white w-6' : 'bg-white/50 w-1.5'}`} \r\n                     />\r\n                   ))}\r\n                 </div>\r\n               )}\r\n             </div>\r\n\r\n             {/* RIGHT: SCROLLABLE DETAILS */}\r\n             <div className=\"w-full md:w-1/2 flex flex-col h-full bg-white overflow-hidden\">\r\n                <div className=\"flex-1 overflow-y-auto p-6 md:p-8\">\r\n                   <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900 leading-tight\">{selectedProduct.name}</h2>\r\n                   \r\n                   <div className=\"mt-2 flex items-center gap-2\">\r\n                     <p className=\"text-2xl font-bold text-emerald-600\">â‚¦{selectedProduct.price.toLocaleString()}</p>\r\n                     {selectedProduct.stock_quantity > 0 ? (\r\n                       <span className=\"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold\">In Stock</span>\r\n                     ) : (\r\n                       <span className=\"bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full font-bold\">Out of Stock</span>\r\n                     )}\r\n                   </div>\r\n\r\n                   <div className=\"mt-6 border-t border-gray-100 pt-6\">\r\n                     <h3 className=\"text-sm font-bold uppercase mb-2 text-gray-900 tracking-wide\">Description</h3>\r\n                     <p className=\"text-gray-500 text-sm leading-relaxed whitespace-pre-line\">\r\n                       {selectedProduct.description || \"No description available.\"}\r\n                     </p>\r\n                   </div>\r\n                </div>\r\n                \r\n                {/* FIXED FOOTER */}\r\n                <div className=\"p-4 md:p-6 border-t border-gray-100 bg-white shrink-0 z-20 pb-8 md:pb-6\">\r\n                   <button \r\n                     onClick={() => addToCart(selectedProduct!)} \r\n                     disabled={selectedProduct.stock_quantity < 1}\r\n                     className=\"w-full bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-gray-800 active:scale-95 transition flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n                   >\r\n                     {selectedProduct.stock_quantity > 0 ? <><ShoppingBag size={20}/> Add to Bag</> : \"Sold Out\"}\r\n                   </button>\r\n                </div>\r\n             </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}